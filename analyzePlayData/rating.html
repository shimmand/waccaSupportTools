<!doctype html>
<html lang="ja">
    <head>
        <title>WACCA RATING ANALYZER</title>
        <meta charset="utf-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1"/>
        <meta http-equiv="pragma" content="no-cache"/>
        <meta http-equiv="cache-control" content="no-cache"/>
        <meta http-equiv="expires" content="0"/>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-F3w7mX95PdgyTmZZMECAngseQB83DfGTowi0iMjiWaeVhAn4FJkqJByhZMI3AhiU" crossorigin="anonymous"/>
        <script defer src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-/bQdsTh/da6pkI1MST/rWKFNjaCP5gBSY4sEBT38Q/9RBh9AH40zEOg7Hlq2THRZ" crossorigin="anonymous"></script>
        <style>
            body {
                -webkit-text-size-adjust: 100%;
            }
            .form-control.playdata {
                height: 6.25rem;
            }
            .form-control.is-invalid {
                background-color: #f8d7da;
            }
            .badge.difficulty {
                width: 6.25rem;
            }
            .badge.expert {
                background-color: #fa0c98;
            }
            .badge.inferno {
                background-color: #4a004f;
            }
            .bg-plain {
                background-color: #959595;
            }
            .bg-navy {
                background-color: #4023ec;
            }
            .bg-yellow {
                background-color: #ffc800;
            }
            .bg-red {
                background-color: #ff007d;
            }
            .bg-purple {
                background-color: #6610f2;
            }
            .bg-blue {
                background: linear-gradient(30deg, #c0feff, #00beec, #c0feff);
            }
            .bg-silver {
                background: linear-gradient(30deg, #eaffff, #95edf9, #eaffff);
            }
            .bg-gold {
                background: linear-gradient(30deg, #eee100, #ffb100, #eee100);
            }
            .bg-rainbow {
                background: linear-gradient(30deg, #ff008a, #d2e717, #00ffeb);
            }
            .text-plain {
                color: #959595;
            }
            .text-navy {
                color: #4023ec;
            }
            .text-yellow {
                color: #ffc800;
            }
            .text-red {
                color: #ff007d;
            }
            .text-purple {
                color: #6610f2;
            }
            .text-blue {
                background: linear-gradient(30deg, #c0feff, #00beec, #c0feff);
                color: #00beec;
                background-clip: text;
                -webkit-text-fill-color: transparent;
            }
            .text-silver {
                background: linear-gradient(30deg, #eaffff, #95edf9, #eaffff);
                color: #95edf9;
                background-clip: text;
                -webkit-text-fill-color: transparent;
            }
            .text-gold {
                background: linear-gradient(30deg, #eee100, #ffb100, #eee100);
                color: #ffb100;
                background-clip: text;
                -webkit-text-fill-color: transparent;
            }
            .text-rainbow {
                background: linear-gradient(30deg, #ff008a, #d2e717, #00ffeb);
                color: #00ffeb;
                background-clip: text;
                -webkit-text-fill-color: transparent;
            }
            .bg-lt-950 {
                background-color: #6c757d;
            }
            .bg-is-950 {
                background-color: #ffc107;
            }
            .bg-is-960 {
                background-color: #fd7e14;
            }
            .bg-is-970 {
                background-color: #dc3545;
            }
            .bg-is-980 {
                background-color: #6f42c1;
            }
            .bg-ge-990 {
                background-color: #0d6efd;
            }
            .lt-950 {
                color: #6c757d;
            }
            .is-950 {
                color: #ffc107;
            }
            .is-960 {
                color: #fd7e14;
            }
            .is-970 {
                color: #dc3545;
            }
            .is-980 {
                color: #6f42c1;
            }
            .ge-990 {
                color: #0d6efd;
            }
            .table-custom-orange {
                --bs-table-bg: #ffe5d0;
                color: #000;
            }
            .text-custom-primary-dark {
                color: #084298;
            }
            .accordion-button-custom-danger:not(.collapsed) {
                background-color: #f8d7da;
                color: #dc3545;
            }
        </style>
        <script>
            // 貼り付け()
            function paste(){
                const playdata = document.querySelector('#playdata');

                // テキストエリアのエラー表示を解除
                if (playdata.classList.contains('is-invalid')){
                    playdata.classList.remove('is-invalid');
                }
                
                // すべての警告文を非表示
                document.querySelectorAll('.error-feedback-1').forEach(div => {
                    if (!div.classList.contains('d-none')) div.classList.add('d-none');
                })
                
                // テキストエリアへの操作であることを視覚的に表すためフォーカスを当てる
                playdata.focus();
                
                // ユーザーへクリップボードのアクセス許可を確認
                const promise = navigator.clipboard.readText();

                promise.then(clipText => {
                    playdata.value = clipText;
                }, reason => {
                    showDeniedWarning();
                });
            }

            // クリップボードへのアクセスが拒否された場合のメッセージを表示
            function showDeniedWarning(){
                const playdata = document.querySelector('#playdata');

                // テキストエリアをエラー表示に変更
                if (!playdata.classList.contains('is-invalid')){
                    playdata.classList.add('is-invalid');
                }
                
                // すべての警告文を非表示
                document.querySelectorAll('.error-feedback-1').forEach(div => {
                    if (!div.classList.contains('d-none')) div.classList.add('d-none');
                })

                // プレイデータの形式に誤りがある旨を表示
                document.querySelectorAll('#warning-denied')[0].classList.remove('d-none');
            }

            // スコアの分析()
            function analyze(){
                
                // 改行で区切って譜面を配列化
                const playdata = document.querySelector('#playdata');
                const charts = playdata.value.split('\n');

                // エラー確認
                let isClear = true;

                // プレイデータが空の場合
                if (playdata.value.length == 0){
                    isClear = false;

                    // テキストエリアをエラー表示に変更
                    if (!playdata.classList.contains('is-invalid')){
                        playdata.classList.add('is-invalid');
                    }

                    // すべての警告文を非表示
                    document.querySelectorAll('.error-feedback-1').forEach(div => {
                        if (!div.classList.contains('d-none')) div.classList.add('d-none');
                    })

                    // プレイデータが空である旨を表示
                    document.querySelectorAll('#warning-empty')[0].classList.remove('d-none');

                } else {
                    // 譜面データの検証
                    const searchPattern = /[^,]+,(NORMAL|HARD|EXPERT|INFERNO) [0-9]{1,2}\+?,[0-9]{1,7}/g;
                    const testResult = charts.map(chart => chart.match(searchPattern) == chart);
                    
                    // プレイデータの形式に誤りがある場合
                    if (!testResult.indexOf(false)){
                        isClear = false;

                        // テキストエリアをエラー表示に変更
                        if (!playdata.classList.contains('is-invalid')){
                            playdata.classList.add('is-invalid');
                        }
                        
                        // すべての警告文を非表示
                        document.querySelectorAll('.error-feedback-1').forEach(div => {
                            if (!div.classList.contains('d-none')) div.classList.add('d-none');
                        })

                        // プレイデータの形式に誤りがある旨を表示
                        document.querySelectorAll('#warning-invalid')[0].classList.remove('d-none');
                    }
                }

                if (isClear){

                    // スコア情報の書き出し先を選択
                    const scoresTables = document.querySelectorAll('.scoresTable');

                    // 既に実行された形跡がある場合は内容を削除
                    if (document.querySelectorAll('tr').length != 4){
                        scoresTables.forEach(table => table.innerHTML = '');
                        document.querySelector('#radio1-1').checked = true;
                    }

                    // テキストエリアが無効の表示である場合は解除
                    if (playdata.classList.contains('is-invalid')){
                        playdata.classList.remove('is-invalid');
                    }

                    // 譜面データを格納する配列を用意
                    let chartsListNew = [];
                    let chartsListOld = [];

                    // 譜面ごとに・・・
                    charts.forEach(chart => {
                        
                        // カンマ区切り
                        // [0: 曲名, 1: 譜面レベル, 2: スコア]
                        const data = chart.split(',');

                        // 取得時にエスケープしたカンマをここで元に戻す
                        const title = data[0].replace('__', ',');
                        const level = data[1];
                        const score = data[2];

                        // 曲名とレベルで譜面定数を取得
                        const rating = getRatingValue(title, level);

                        // INFERNOが存在する && 譜面定数のデータが存在する場合・・・
                        if ((level != 'INFERNO 0') && (rating != null)){

                            // 難易度に応じた色を設定
                            let difficulty = '';
                            if (level.indexOf('EXPERT') == 0) difficulty = 'expert';
                            if (level.indexOf('INFERNO') == 0) difficulty = 'inferno';

                            // スコアに応じた譜面定数へ乗ずる値（倍数）
                            const multipliers = getMultiplierTable();
                            let multiplier = 0;

                            // スコアと照らし合わせて倍数を設定
                            for (let i = 0; i < multipliers.length; i++){
                                if (multiplier == 0){
                                    if (multipliers[i][0] <= Number(score)) multiplier = multipliers[i][1];
                                }
                            }

                            // 倍数が上限値である場合に表示するアイコン
                            const maxBadgeCode = '<span class="badge align-text-top bg-secondary">MAX</span>';

                            // 現在の譜面別レーティング
                            const adjustedRating = (multiplier * rating).toFixed(2);

                            // 譜面別レーティングの上限値
                            const upperRating = (multiplier < 4 ? (4 * rating).toFixed(2) : maxBadgeCode);

                            // 配列に入れるデータ
                            const chartData = [title, difficulty, level, score, rating, multiplier, adjustedRating, upperRating];

                            // 譜面が新曲枠であれば新曲枠の配列に、そうでなければ旧曲枠の配列にデータを追加
                            if (checkChartIsNew(title, level)){
                                chartsListNew.push(chartData);
                            } else {
                                chartsListOld.push(chartData);
                            }
                        }
                    });

                    // 譜面データの配列を譜面別レーティングの降順で並び替え
                    chartsListNew.sort(function(a, b){return (b[6] - a[6])});
                    chartsListOld.sort(function(a, b){return (b[6] - a[6])});

                    // 反復処理で扱いやすいようにこれまでの変数を配列化
                    // [0: 新曲枠, 1: 旧曲枠]
                    const chartsLists = [chartsListNew, chartsListOld];

                    // グラフとレーティングの各種数値を書き出す要素を選択
                    const statsGraphs = document.querySelectorAll('.stats-graph');
                    const rateGraph = document.querySelector('.rate-graph');
                    const singleRateLowers = document.querySelectorAll('.singleRateLower');
                    const summedRateCurrents = document.querySelectorAll('.summedRateCurrent');
                    const summedRateUppers = document.querySelectorAll('.summedRateUpper');

                    // レーティング対象曲の数
                    // [0: 新曲枠, 1: 旧曲枠]
                    const targetsVolumes = [15, 35];

                    // 総合レーティングが上昇する基準となる譜面別レーティング（レーティング対象曲の最下位）
                    // [0: 新曲枠, 1: 旧曲枠]
                    let varSingleRateLowers = [0, 0];

                    // 現在のレーティング
                    // [0: 新曲枠, 1: 旧曲枠]
                    let varSummedRateCurrents = [0, 0];

                    // レーティング理論値
                    // [0: 新曲枠, 1: 旧曲枠]
                    let varSummedRateUppers = [0, 0];

                    // クラス色のボーダー
                    // [(*)0: plain, (*)1: navy, (*)2: yellow, (*)3: red, (*)4: purple, (*)5: blue, (*)6: silver, (*)7: gold, 8: rainbow]
                    let varClassRanges = [300, 300, 400, 300, 300, 300, 300, 300, 0];

                    // 目標倍率（スコア）の一覧
                    // [0: 950k, 1: 960k, 2: 970k, 3: 980k, 4: 990k]
                    // !!! 関連要素: tr > td[8-12]
                    const targetMultipliers = [3.00, 3.25, 3.50, 3.75, 4.00];

                    // 新曲枠 -> 旧曲枠の順に・・・
                    chartsLists.forEach((chartsList, listIndex) => {

                        // レーティング理論値を計算
                        // slice: 譜面リストを複製 -> sort: 譜面定数の降順にソート -> slice: レーティング対象曲の数だけ絞り込み -> reduce: 譜面定数を4倍したものを合計
                        varSummedRateUppers[listIndex] = chartsList.slice().sort(function(a, b){return (b[4] - a[4])}).slice(0, targetsVolumes[listIndex]).reduce((sum, e) => sum + Number(e[4]), 0) * 4;

                        // グラフ用の配列
                        // [0: <950k, 1: 950k, 2: 960k, 3: 970k, 4: 980k, 5: 990k]
                        let totalRatings = [0, 0, 0, 0, 0, 0];

                        // 譜面ごとに・・・
                        chartsList.forEach((chart, index) => {

                            // 新しい行を生成
                            const tempRow = document.createElement('tr');
                            const tableRow = scoresTables[listIndex].appendChild(tempRow);
                            let headerElm = 'td';

                            // レーティング対象曲であれば・・・
                            if (index < targetsVolumes[listIndex]){
                                // ヘッダーを参照
                                headerElm = 'th scope="row"';
                                
                                // 背景をハイライト
                                tableRow.classList.add('table-primary');

                                // 譜面別レーティングの下限値を更新
                                varSingleRateLowers[listIndex] = Number(chart[6]);

                                // 譜面別レーティングの小計に加算
                                varSummedRateCurrents[listIndex] += Number(chart[6]);
                            }

                            // 特定スコアに到達した際の総合レーティング上昇量
                            // [0: 950k, 1: 960k, 2: 970k, 3: 980k, 4: 990k]
                            const increases = targetMultipliers.map(multiplier => {

                                // 未到達のスコア帯かつレーティングが上昇する場合は数値を返す
                                if ((chart[5] < multiplier) && ((chart[4] * multiplier) > varSingleRateLowers[listIndex])){
                                    return '+' + ((chart[4] * multiplier) - varSingleRateLowers[listIndex]).toFixed(2);
                                } else {
                                    return '-';
                                }
                            });

                            // 総合レーティングの上昇量がすべて「-」である場合は、行にその旨を示すクラスを追加
                            if (increases.filter(e => e == '-').length == increases.length){
                                tableRow.classList.add('all-clear');
                            } else {
                                tableRow.classList.add('table-custom-orange');
                            }

                            // 挿入するHTMLのコードを生成
                            const code = 
                                `<${headerElm}>${index + 1}</td>
                                <td>${chart[0]}</td>
                                <td><span class="badge align-text-top difficulty ${chart[1]}">${chart[2]}</span></td>
                                <td>${chart[3]}</td>
                                <td>${chart[4]}</td>
                                <td>${chart[5].toFixed(2)}</td>
                                <td>${chart[6]}</td>
                                <td>${chart[7]}</td>
                                <td>${increases[0]}</td>
                                <td>${increases[1]}</td>
                                <td>${increases[2]}</td>
                                <td>${increases[3]}</td>
                                <td>${increases[4]}</td>`;

                            if (chart[5] < 3.00) totalRatings[0] += 1;
                            if (chart[5] == 3.00) totalRatings[1] += 1;
                            if (chart[5] == 3.25) totalRatings[2] += 1;
                            if (chart[5] == 3.50) totalRatings[3] += 1;
                            if (chart[5] == 3.75) totalRatings[4] += 1;
                            if (chart[5] == 4.00) totalRatings[5] += 1;

                            // コードを挿入
                            tableRow.innerHTML = code;
                            tableRow.setAttribute('data-index', index + 1);
                            tableRow.setAttribute('data-const', chart[4]);
                            tableRow.setAttribute('data-rate', chart[6]);
                            const chartType = (listIndex == 0) ? 'New' : 'Old';

                            const maxRate = Number(4 * chart[4]).toFixed(2);
                            const fileRow = `"${chartType}","${index + 1}","${chart[0]}","${chart[2]}","${chart[3]}","${chart[4]}","${chart[5].toFixed(2)}","${chart[6]}","${maxRate}","${increases[0]}","${increases[1]}","${increases[2]}","${increases[3]}","${increases[4]}"`;
                            tableRow.setAttribute('data-file-row', fileRow);
                        });

                        // 枠ごとの見出しにレーティングの各種数値を書き出し
                        singleRateLowers[listIndex].innerHTML = varSingleRateLowers[listIndex].toFixed(2);
                        summedRateCurrents[listIndex].innerHTML = varSummedRateCurrents[listIndex].toFixed(2);
                        summedRateUppers[listIndex].innerHTML = varSummedRateUppers[listIndex].toFixed(2);

                        // 譜面数の合計を計算
                        const chartsCount = totalRatings.reduce((sum, e) => sum + e, 0);
                        
                        // 枠ごとにグラフの棒を書き出し
                        statsGraphs[listIndex].querySelectorAll('.graph-bar-stats').forEach((div, index) => {
                            const style = `width: ${totalRatings[index] / chartsCount * 100}%;`;
                            div.setAttribute('style', style);
                            div.setAttribute('aria-valuenow', totalRatings[index]);
                            div.setAttribute('aria-valuemax', chartsCount);
                        });

                        // 枠ごとにグラフのデータを書き出し
                        statsGraphs[listIndex].querySelectorAll('.graph-ratio-stats').forEach((div, index) => {
                            div.innerHTML = `(${(totalRatings[index] / chartsCount * 100).toFixed(2)}%)`;
                        });
                    });
                    
                    // 総合グラフを書き出すための準備
                    const totalRateUpper = varSummedRateUppers.reduce((sum, e) => sum + e, 0).toFixed(2);
                    const totalRateCurrent = varSummedRateCurrents.reduce((sum, e) => sum + e, 0).toFixed(2);

                    const scaleDotsVolume = Math.floor(totalRateUpper / 100);
                    const extraRate = totalRateUpper - (scaleDotsVolume * 100);
                    const equalRange = (100 - (extraRate / totalRateUpper * 100)) / scaleDotsVolume;

                    const scaleDotCode = 
                        `<div class="position-absolute translate-middle scale-dot opacity-50" style="left: 0%!important; top: 40%!important;">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-dot" viewBox="0 0 16 16">
                                <path d="M8 9.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3z"/>
                            </svg>
                        </div>`

                    // 虹レートの上限値を設定
                    varClassRanges[(varClassRanges.length - 1)] = (totalRateUpper - 2500);

                    // 見出し部分に総合レーティングを書き出し
                    document.querySelector('.total-rate-current').innerHTML = totalRateCurrent;
                    document.querySelector('.total-rate-upper').innerHTML = totalRateUpper;

                    // 総合レーティングのグラフ上に表示する目印を表示（100ごとの目盛り）
                    document.querySelectorAll('.scale-dot').forEach(div => div.remove());

                    for (let index = 0; index < scaleDotsVolume; index++) {
                        const dotLocation = (index + 1) * equalRange;
                        const insertCode = scaleDotCode.replace('left: 0%', `left: ${dotLocation}%`);
                        document.querySelector('div.rate-graph div.graph-bar').insertAdjacentHTML('beforeend', insertCode);
                    }
                    // 総合レーティングのグラフ上に表示する目印を表示（現在のレーティングを指す三角）
                    document.querySelectorAll('.current-loc').forEach(div => {
                        const styleTextBefore = div.getAttribute('style');
                        const findPattern = /left: [0-9.]+?%!important;/;
                        const replaceText = `left: ${totalRateCurrent / totalRateUpper * 100}%!important;`;
                        const styleTextAfter = styleTextBefore.replace(findPattern, replaceText);
                        div.setAttribute('style', styleTextAfter);
                    });

                    // 総合レーティングのグラフを書き出し
                    rateGraph.querySelectorAll('.graph-bar-rate').forEach((div, index) => {
                        const borderValue = varClassRanges[index];
                        const style = `width: ${borderValue / totalRateUpper * 100}%;`;
                        div.setAttribute('style', style);
                        div.setAttribute('aria-valuenow', borderValue);
                        div.setAttribute('aria-valuemax', totalRateUpper);
                    });

                    // 無効にされているフォームをすべて有効化
                    document.querySelectorAll('input[disabled]').forEach(e => e.disabled = false);

                    // 再描画
                    document.querySelectorAll('.refresh-target').forEach(e => e.innerHTML = e.innerHTML);

                    playdata.classList.add('is-valid');
                }
            }

            // レーティングへ影響しない譜面の表示状態を変更()
            function changeDisplayState(mode){
                if (document.querySelectorAll('tr').length != 4){
                    document.querySelectorAll('.all-clear').forEach(tr => {
                        // 初期化
                        // mode == 0 : すべて表示する
                        if (tr.classList.contains('d-none')){
                            tr.classList.remove('d-none');
                        }

                        // mode == 1 : レーティング対象は表示する
                        if (mode == 1){
                            if (!tr.classList.contains('table-primary')){
                                tr.classList.add('d-none');
                            }
                        }

                        // mode == 2 : すべて非表示にする
                        if (mode == 2){
                            tr.classList.add('d-none');
                        }
                    });
                }
            }


            // Twitterを開く()
            function openDevsTwitter(){
                window.open('https://twitter.com/shimmand');
            }

            // 実行例を開く()
            function openAnExample(){
                window.open('https://shimmand.github.io/waccaSupportTools/analyzePlayData/example.html');
            }
            
            // ブックマークレットをコピー()
            function copyBookmarklet() {
                const copyTarget = document.getElementById("copyTarget");
                const writeString = copyTarget.value;

                if (navigator.clipboard == undefined){
                    window.clipboardData.setData('Text', writeString);
                } else {
                    navigator.clipboard.writeText(writeString);
                };

                alert("コピーしました！\nCopied!");
            };

            // 譜面データを開く()
            function openChartsData(){
                window.open('https://shimmand.github.io/waccaSupportTools/analyzePlayData/chartsTable.csv');
            }

            // スコアと倍数の対応表() => Array[[]]
            function getMultiplierTable(){
                return [
                    [990000, 4],
                    [980000, 3.75],
                    [970000, 3.5],
                    [960000, 3.25],
                    [950000, 3],
                    [940000, 2.75],
                    [920000, 2.5],
                    [900000, 2],
                    [850000, 1],
                    [800000, 0.8],
                    [700000, 0.7],
                    [600000, 0.6],
                    [500000, 0.5],
                    [400000, 0.4],
                    [300000, 0.3],
                    [200000, 0.2],
                    [100000, 0.1],
                    [0, 0]
                ];
            }

            // 定数を取得(曲名, レベル文字列) => 0.0
            // !!! 注意事項: 定数表の長さを変更した場合は、この関数内のインデックス値に変更の必要がないか確認すること
            function getRatingValue(songTitle, diffValue){
                const rating = getRatingTable();
                
                for( let i = 0; i < rating.length; i++ ){
                    if( rating[i][0] == songTitle ) {
                        
                        // [..., 1: EXPERTレベル, 2: EXPERT定数, ...]
                        if( rating[i][1] == diffValue ) return rating[i][2].toFixed(1);
                        
                        // [..., 4: INFERNOレベル, 5: INFERNO定数, ...]
                        if( rating[i][4] == diffValue ) return rating[i][5].toFixed(1);
                    }
                }
            }

            // 新曲枠か否かを確認(曲名, レベル文字列) => Boolean
            // !!! 注意事項: 定数表の長さを変更した場合は、この関数内のインデックス値に変更の必要がないか確認すること
            function checkChartIsNew(songTitle, diffValue){
                const rating = getRatingTable();
                
                for( let i = 0; i < rating.length; i++ ){
                    if( rating[i][0] == songTitle ) {

                        // [..., 1: EXPERTレベル, ..., 3: EXPERTは新曲枠?, ...]
                        if( rating[i][1] == diffValue ) return rating[i][3];

                        // [..., 4: INFERNOレベル, ..., 6: INFERNOは新曲枠?]
                        if( rating[i][4] == diffValue ) return rating[i][6];
                    }
                }
            }

            // CSVで保存()
            function saveAsCSV() {
                const dataTableRow = document.querySelectorAll('tr[data-index]');
                const headerTextJpn = '"種別","#","曲名","レベル","スコア","定数","倍数","現在","上限","950k","960k","970k","980k","990k"\n';
                const headerTextEng = '"Type","#","Song","Level","Score","Const","Modifier","Now","Max","950k","960k","970k","980k","990k"\n';
                let dataTableText = (document.querySelectorAll('.lang-jpn.d-none').length == 0) ? headerTextJpn : headerTextEng;

                dataTableRow.forEach((tr, index) => {
                    if (index > 0) dataTableText += '\n';
                    dataTableText += tr.dataset.fileRow;
                });

                const bom  = new Uint8Array([0xEF, 0xBB, 0xBF]);
                const blob = new Blob([bom, dataTableText], {type: 'text/csv'});
                const date = new Date();
                const today = (date) => {
                    const formattedDate = date.getFullYear() + "-" + (date.getMonth() + 1) + "-" + date.getDate();
                    return formattedDate;
                }

                if (window.navigator.msSaveBlob) { 
                    window.navigator.msSaveOrOpenBlob(blob, `playdata-${today}.csv`);
                } else {
                    window.open(window.URL.createObjectURL(blob));
                }
            }

            // 特定の言語を表示()
            function showLangTextElement(selector) {
                const langElms = document.querySelectorAll(selector);
                
                langElms.forEach(e => {
                    if (e.classList.contains('d-none')){
                        e.classList.remove('d-none');
                    }
                });
            }

            // 特定の言語を非表示()
            function hideLangTextElement(selector) {
                const langElms = document.querySelectorAll(selector);
                
                langElms.forEach(e => {
                    if (!e.classList.contains('d-none')){
                        e.classList.add('d-none');
                    }
                });
            }

            // 日本語に変更()
            function switchToJapanese() {
                hideLangTextElement('.lang-eng');
                showLangTextElement('.lang-jpn');
            }

            // 英語に変更()
            function switchToEnglish() {
                hideLangTextElement('.lang-jpn');
                showLangTextElement('.lang-eng');
            }

            // マイページを開く()
            function openMyPage() {
                window.open('https://wacca.marv-games.jp/web/top');
            }

            // 譜面定数一覧表() => Array[[]]
            // ブラウザーにキャッシュされたくないので、キャッシュ禁止のHTMLに直書きするという力技
            // [0: 曲名, 1: EXPERTレベル, 2: EXPERT定数, 3: EXPERTは新曲枠?, 4: INFERNOレベル, 5: INFERNO定数, 6: INFERNOは新曲枠?]
            // !!! 関連要素: getRatingValue(), checkChartIsNew()
            function getRatingTable(){
                return [
                    ["メニメニマニマニ","EXPERT 12",12.3,true,"INFERNO 0",0.0,],
                    ["叩ケ 叩ケ 手ェ叩ケ","EXPERT 12",12.3,true,"INFERNO 0",0.0,],
                    ["Fly to NEW WORLD","EXPERT 12",12.2,true,"INFERNO 0",0.0,],
                    ["透明声彩","EXPERT 11+",11.8,true,"INFERNO 0",0.0,],
                    ["うっせぇわ","EXPERT 12",12.2,true,"INFERNO 0",0.0,],
                    ["Fam☆Fam☆Time!","EXPERT 11+",11.9,true,"INFERNO 0",0.0,],
                    ["cœur","EXPERT 12+",12.7,false,"INFERNO 0",0.0,],
                    ["私はNo 1！","EXPERT 12",12.3,false,"INFERNO 0",0.0,],
                    ["ソロモン・ナイト","EXPERT 13",13.4,false,"INFERNO 0",0.0,],
                    ["LOVE!HUG!GROOVY!!","EXPERT 12",12.4,false,"INFERNO 13",13.5,false],
                    ["Dig Delight!","EXPERT 11",11.4,false,"INFERNO 0",0.0,],
                    ["電乱★カウントダウン","EXPERT 12",12.5,false,"INFERNO 0",0.0,],
                    ["Photon Melodies","EXPERT 11",11.5,false,"INFERNO 0",0.0,],
                    ["ぐるぐるDJ TURN!!","EXPERT 12+",12.8,false,"INFERNO 0",0.0,],
                    ["sister's noise","EXPERT 10",10.1,false,"INFERNO 0",0.0,],
                    ["なだめスかし Negotiation","EXPERT 11+",11.9,false,"INFERNO 0",0.0,],
                    ["サクリファイス","EXPERT 12",12.2,false,"INFERNO 0",0.0,],
                    ["非実在系女子たちはどうすりゃいいですか？","EXPERT 12",12.6,false,"INFERNO 0",0.0,],
                    ["ぺこみこ大戦争！！","EXPERT 11",11.2,false,"INFERNO 13",13.2,false],
                    ["Say!ファンファーレ!","EXPERT 12",12.5,false,"INFERNO 0",0.0,],
                    ["NEXT COLOR PLANET","EXPERT 12",12.6,false,"INFERNO 0",0.0,],
                    ["夢見る空へ","EXPERT 11",11.3,false,"INFERNO 0",0.0,],
                    ["お願いマッスル","EXPERT 10+",10.7,false,"INFERNO 0",0.0,],
                    ["マッチョアネーム？","EXPERT 12+",12.7,false,"INFERNO 0",0.0,],
                    ["HELLO to DREAM","EXPERT 9+",9.7,false,"INFERNO 0",0.0,],
                    ["over and over","EXPERT 10",10.4,false,"INFERNO 0",0.0,],
                    ["トロピカッ☆バケーション","EXPERT 10+",10.7,false,"INFERNO 0",0.0,],
                    ["秒針を噛む","EXPERT 11",11.0,false,"INFERNO 0",0.0,],
                    ["ないものねだり","EXPERT 11",11.1,false,"INFERNO 0",0.0,],
                    ["HOT LIMIT","EXPERT 10",10.0,false,"INFERNO 0",0.0,],
                    ["キラメキライダー☆","EXPERT 11",11.5,false,"INFERNO 0",0.0,],
                    ["ガヴリールドロップキック","EXPERT 11",11.0,false,"INFERNO 0",0.0,],
                    ["This game","EXPERT 10+",10.7,false,"INFERNO 0",0.0,],
                    ["RAGE OF DUST","EXPERT 9",9.6,false,"INFERNO 0",0.0,],
                    ["Make it！","EXPERT 9",9.4,false,"INFERNO 0",0.0,],
                    ["Make it！ (DJ Genki Remix)","EXPERT 11",11.6,false,"INFERNO 0",0.0,],
                    ["キラッとスタート","EXPERT 10",10.2,false,"INFERNO 0",0.0,],
                    ["キラッとスタート (USAO Remix)","EXPERT 12",12.5,false,"INFERNO 0",0.0,],
                    ["ハート♥イロ♥トリドリ〜ム","EXPERT 10",10.1,false,"INFERNO 0",0.0,],
                    ["ダダダダ天使","EXPERT 12",12.0,false,"INFERNO 0",0.0,],
                    ["青空のラプソディ","EXPERT 9",9.3,false,"INFERNO 11",11.0,true],
                    ["Bravely You","EXPERT 9",9.5,false,"INFERNO 0",0.0,],
                    ["ぼなぺてぃーと♡S","EXPERT 11",11.5,false,"INFERNO 0",0.0,],
                    ["デタラメなマイナスとプラスにおけるブレンド考","EXPERT 10",10.0,false,"INFERNO 0",0.0,],
                    ["輪廻転生","EXPERT 12",12.3,false,"INFERNO 0",0.0,],
                    ["ストライク・ザ・ブラッド","EXPERT 11+",11.7,false,"INFERNO 0",0.0,],
                    ["新宝島","EXPERT 9",9.4,false,"INFERNO 0",0.0,],
                    ["U.S.A.","EXPERT 10",10.2,false,"INFERNO 0",0.0,],
                    ["Shiny Smily Story","EXPERT 10",10.4,false,"INFERNO 0",0.0,],
                    ["Dream☆Story","EXPERT 11",11.2,false,"INFERNO 0",0.0,],
                    ["without U","EXPERT 10",10.2,false,"INFERNO 0",0.0,],
                    ["シャルル","EXPERT 10",10.3,false,"INFERNO 0",0.0,],
                    ["ドラマツルギー","EXPERT 10",10.1,false,"INFERNO 0",0.0,],
                    ["オドループ","EXPERT 10",10.4,false,"INFERNO 0",0.0,],
                    ["only my railgun","EXPERT 9",9.5,false,"INFERNO 0",0.0,],
                    ["You Only Live Once","EXPERT 9",9.1,false,"INFERNO 0",0.0,],
                    ["残酷な天使のテーゼ","EXPERT 9",9.3,false,"INFERNO 0",0.0,],
                    ["ただ君に晴れ","EXPERT 9",9.6,false,"INFERNO 0",0.0,],
                    ["The Light","EXPERT 12",12.1,false,"INFERNO 0",0.0,],
                    ["AIAIAI (feat. 中田ヤスタカ)","EXPERT 9",9.4,false,"INFERNO 0",0.0,],
                    ["Hello, Morning","EXPERT 11",11.2,false,"INFERNO 0",0.0,],
                    ["Raise Your Heart!!","EXPERT 10",10.6,false,"INFERNO 0",0.0,],
                    ["SHINY DAYS","EXPERT 9",9.0,false,"INFERNO 0",0.0,],
                    ["EXCITE","EXPERT 10",10.0,false,"INFERNO 0",0.0,],
                    ["シュガーソングとビターステップ","EXPERT 10",10.4,false,"INFERNO 0",0.0,],
                    ["ファティマ","EXPERT 9",9.5,false,"INFERNO 0",0.0,],
                    ["回レ！雪月花","EXPERT 11",11.0,false,"INFERNO 13+",13.8,true],
                    ["ピースサイン","EXPERT 9+",9.8,false,"INFERNO 0",0.0,],
                    ["徒花ネクロマンシー","EXPERT 9+",9.7,false,"INFERNO 0",0.0,],
                    ["ようこそジャパリパークへ","EXPERT 10+",10.7,false,"INFERNO 0",0.0,],
                    ["POP TEAM EPIC","EXPERT 11",11.4,false,"INFERNO 0",0.0,],
                    ["ファッとして桃源郷","EXPERT 12",12.0,false,"INFERNO 0",0.0,],
                    ["Nameless Story","EXPERT 10",10.3,false,"INFERNO 0",0.0,],
                    ["TOMORROW","EXPERT 10",10.4,false,"INFERNO 0",0.0,],
                    ["五等分の気持ち","EXPERT 9+",9.9,false,"INFERNO 0",0.0,],
                    ["ギミチョコ!!","EXPERT 12+",12.9,false,"INFERNO 0",0.0,],
                    ["ウマーベラス","EXPERT 9+",9.8,false,"INFERNO 0",0.0,],
                    ["ワールズエンド・ダンスホール","EXPERT 12",12.5,true,"INFERNO 0",0.0,],
                    ["炉心融解","EXPERT 12",12.2,true,"INFERNO 0",0.0,],
                    ["∞(2018Remake)","EXPERT 13+",13.8,true,"INFERNO 0",0.0,],
                    ["ちがう!!!","EXPERT 12",12.4,true,"INFERNO 0",0.0,],
                    ["おねがいダーリン","EXPERT 11",11.6,true,"INFERNO 0",0.0,],
                    ["怪盗Fの台本（シナリオ）〜消えたダイヤの謎〜","EXPERT 13+",13.7,true,"INFERNO 0",0.0,],
                    ["KING","EXPERT 11",11.6,true,"INFERNO 0",0.0,],
                    ["ダーリンダンス","EXPERT 12+",12.8,true,"INFERNO 0",0.0,],
                    ["トリノコシティ","EXPERT 12",12.2,true,"INFERNO 0",0.0,],
                    ["サマータイムレコード","EXPERT 11+",11.9,,"INFERNO 0",0.0,],
                    ["テレキャスタービーボーイ","EXPERT 11+",11.9,false,"INFERNO 0",0.0,],
                    ["フィクサー","EXPERT 12+",12.9,false,"INFERNO 0",0.0,],
                    ["バレリーコ","EXPERT 11",11.6,false,"INFERNO 0",0.0,],
                    ["だれかの心臓になれたなら","EXPERT 12",12.1,false,"INFERNO 0",0.0,],
                    ["六兆年と一夜物語","EXPERT 12",12.5,false,"INFERNO 0",0.0,],
                    ["ワールドイズマイン","EXPERT 11",11.6,false,"INFERNO 0",0.0,],
                    ["進捗どうですか！","EXPERT 12+",12.8,false,"INFERNO 0",0.0,],
                    ["ぼくらの16bit戦争","EXPERT 13",13.4,false,"INFERNO 0",0.0,],
                    ["隔絶≡タナトス","EXPERT 13",13.5,false,"INFERNO 0",0.0,],
                    ["アスノヨゾラ哨戒班","EXPERT 11+",11.9,false,"INFERNO 0",0.0,],
                    ["ヒビカセ","EXPERT 12",12.3,false,"INFERNO 0",0.0,],
                    ["脳漿炸裂ガール","EXPERT 13",13.5,false,"INFERNO 0",0.0,],
                    ["ポジティブ☆ダンスタイム","EXPERT 11",11.6,false,"INFERNO 0",0.0,],
                    ["Gimme×Gimme feat. 初音ミク・鏡音リン","EXPERT 12",12.0,false,"INFERNO 0",0.0,],
                    ["39みゅーじっく！","EXPERT 10+",10.9,false,"INFERNO 0",0.0,],
                    ["ブリキノダンス","EXPERT 12",12.3,false,"INFERNO 0",0.0,],
                    ["チュルリラ・チュルリラ・ダッダッダ！","EXPERT 12",12.4,false,"INFERNO 0",0.0,],
                    ["おばけのウケねらい","EXPERT 11+",11.7,false,"INFERNO 0",0.0,],
                    ["ベノム","EXPERT 12",12.1,false,"INFERNO 0",0.0,],
                    ["リアル初音ミクの消失","EXPERT 13+",13.7,false,"INFERNO 0",0.0,],
                    ["セツナトリップ","EXPERT 12",12.1,false,"INFERNO 0",0.0,],
                    ["カゲロウデイズ","EXPERT 11",11.3,false,"INFERNO 0",0.0,],
                    ["天ノ弱","EXPERT 10",10.1,false,"INFERNO 0",0.0,],
                    ["ゴーストルール","EXPERT 11",11.6,false,"INFERNO 0",0.0,],
                    ["ロストワンの号哭","EXPERT 12",12.2,false,"INFERNO 0",0.0,],
                    ["いーあるふぁんくらぶ","EXPERT 10",10.0,false,"INFERNO 0",0.0,],
                    ["初音ミクの消失","EXPERT 13+",13.8,false,"INFERNO 0",0.0,],
                    ["劣等上等","EXPERT 11+",11.9,false,"INFERNO 0",0.0,],
                    ["アカリがやってきたぞっ","EXPERT 11",11.2,false,"INFERNO 0",0.0,],
                    ["太陽系デスコ","EXPERT 10+",10.7,false,"INFERNO 0",0.0,],
                    ["気まぐれメルシィ feat. 初音ミク","EXPERT 10",10.5,false,"INFERNO 0",0.0,],
                    ["幸せになれる隠しコマンドがあるらしい","EXPERT 13",13.3,false,"INFERNO 0",0.0,],
                    ["千本桜","EXPERT 10",10.4,false,"INFERNO 0",0.0,],
                    ["エイリアンエイリアン","EXPERT 10",10.5,false,"INFERNO 0",0.0,],
                    ["砂の惑星 feat. 初音ミク","EXPERT 10",10.5,false,"INFERNO 0",0.0,],
                    ["マトリョシカ","EXPERT 10",10.4,false,"INFERNO 0",0.0,],
                    ["Seyana. ～何でも言うことを聞いてくれるアカネチャン～","EXPERT 11+",11.7,false,"INFERNO 0",0.0,],
                    ["フラジール","EXPERT 10",10.3,false,"INFERNO 0",0.0,],
                    ["ロキ","EXPERT 11",11.6,false,"INFERNO 0",0.0,],
                    ["ウミユリ海底譚","EXPERT 10",10.2,false,"INFERNO 0",0.0,],
                    ["スクランブル交際","EXPERT 11",11.0,false,"INFERNO 0",0.0,],
                    ["乙女解剖","EXPERT 9",9.2,false,"INFERNO 0",0.0,],
                    ["Crime Wave","EXPERT 12+",12.7,true,"INFERNO 0",0.0,],
                    ["チルノは覚醒サマーデイズ！","EXPERT 12",12.3,false,"INFERNO 0",0.0,],
                    ["エピクロスの虹はもう見えない","EXPERT 11",11.3,false,"INFERNO 0",0.0,],
                    ["ARROW RAIN feat.ayame","EXPERT 12",12.6,false,"INFERNO 0",0.0,],
                    ["四次元跳躍機関","EXPERT 12+",12.7,false,"INFERNO 0",0.0,],
                    ["Destructive Little Sister","EXPERT 13+",13.9,false,"INFERNO 0",0.0,],
                    ["物凄い勢いでけーねが物凄いうた","EXPERT 12",12.2,false,"INFERNO 0",0.0,],
                    ["患部で止まってすぐ溶ける ～ 狂気の優曇華院","EXPERT 13",13.2,false,"INFERNO 0",0.0,],
                    ["Scream out!","EXPERT 12+",12.8,false,"INFERNO 0",0.0,],
                    ["ホイホイ☆幻想ホロイズム","EXPERT 12+",12.7,false,"INFERNO 0",0.0,],
                    ["Help me, ERINNNNNN!!","EXPERT 11",11.6,false,"INFERNO 0",0.0,],
                    ["進捗どうですか？","EXPERT 12",12.5,false,"INFERNO 0",0.0,],
                    ["Sweet Requiem","EXPERT 12+",12.7,false,"INFERNO 0",0.0,],
                    ["明星ロケット","EXPERT 11+",11.7,false,"INFERNO 0",0.0,],
                    ["ゆけむり魂温泉 II","EXPERT 12",12.0,false,"INFERNO 0",0.0,],
                    ["Calamity Fortune","EXPERT 13+",13.7,false,"INFERNO 0",0.0,],
                    ["ケロ⑨Destiny","EXPERT 11+",11.7,false,"INFERNO 0",0.0,],
                    ["風に乗せた願い","EXPERT 10",10.3,false,"INFERNO 0",0.0,],
                    ["LOVE EAST","EXPERT 11",11.0,false,"INFERNO 0",0.0,],
                    ["天狗の落とし文 feat. ytr","EXPERT 12",12.1,false,"INFERNO 0",0.0,],
                    ["神寂","EXPERT 13",13.5,false,"INFERNO 0",0.0,],
                    ["悪戯センセーション","EXPERT 12",12.3,false,"INFERNO 0",0.0,],
                    ["ナイト・オブ・ナイツ (かめりあ’s“ワンス・アポン・ア・ナイト”Remix)","EXPERT 13",13.1,false,"INFERNO 0",0.0,],
                    ["Mami Mami Zone","EXPERT 11",11.4,false,"INFERNO 0",0.0,],
                    ["チルノのパーフェクトさんすう教室","EXPERT 11",11.5,false,"INFERNO 0",0.0,],
                    ["待チ人ハ来ズ。","EXPERT 10",10.5,false,"INFERNO 0",0.0,],
                    ["taboo tears you up 2017","EXPERT 12",12.4,false,"INFERNO 0",0.0,],
                    ["Bad Apple!! feat. nomico","EXPERT 9",9.3,false,"INFERNO 0",0.0,],
                    ["ナイト・オブ・ナイツ","EXPERT 12",12.0,false,"INFERNO 0",0.0,],
                    ["WARNING×WARNING×WARNING","EXPERT 11",11.5,false,"INFERNO 0",0.0,],
                    ["シャカリキ・ファイト・ブンブン","EXPERT 11+",11.7,false,"INFERNO 0",0.0,],
                    ["ニュー・ウェーブ","EXPERT 9",9.3,false,"INFERNO 0",0.0,],
                    ["ガンガン・ドンドン","EXPERT 9+",9.7,false,"INFERNO 0",0.0,],
                    ["スマイル・アンド・ティアズ","EXPERT 9",9.5,false,"INFERNO 0",0.0,],
                    ["STILL HOT IN MY HEART","EXPERT 10",10.3,false,"INFERNO 0",0.0,],
                    ["Over the sweat and tears","EXPERT 9",9.4,false,"INFERNO 0",0.0,],
                    ["Singin'☆Shine！","EXPERT 9",9.6,false,"INFERNO 0",0.0,],
                    ["恋のMoonlight","EXPERT 11+",11.8,true,"INFERNO 0",0.0,],
                    ["Comet Coaster","EXPERT 13",13.3,true,"INFERNO 0",0.0,],
                    ["XODUS","EXPERT 14",14.0,true,"INFERNO 0",0.0,],
                    ["Lights of Muse","EXPERT 12",12.0,true,"INFERNO 0",0.0,],
                    ["The 90's Decision","EXPERT 13",13.5,true,"INFERNO 0",0.0,],
                    ["粉骨砕身カジノゥ","EXPERT 13",13.6,true,"INFERNO 0",0.0,],
                    ["Avant Raze","EXPERT 12",12.6,true,"INFERNO 0",0.0,],
                    ["#1f1e33","EXPERT 13+",13.9,true,"INFERNO 0",0.0,],
                    ["Arcahv","EXPERT 13",13.6,true,"INFERNO 0",0.0,],
                    ["最強STRONGER","EXPERT 14",14.0,true,"INFERNO 0",0.0,],
                    ["Let you DIVE! (nitro rmx)","EXPERT 12+",12.8,true,"INFERNO 0",0.0,],
                    ["Sheriruth (Laur Remix)","EXPERT 13",13.3,true,"INFERNO 0",0.0,],
                    ["さんさーら！","EXPERT 12",12.4,false,"INFERNO 0",0.0,],
                    ["Night Club Junkie","EXPERT 12",12.5,false,"INFERNO 0",0.0,],
                    ["PUPA","EXPERT 13+",13.7,false,"INFERNO 0",0.0,],
                    ["Destr0yer","EXPERT 13",13.0,false,"INFERNO 0",0.0,],
                    ["もぺもぺ","EXPERT 12+",12.7,false,"INFERNO 0",0.0,],
                    ["MAGENTA POTION","EXPERT 12",12.6,false,"INFERNO 0",0.0,],
                    ["進捗WARS feat．ビートまりお","EXPERT 11",11.5,false,"INFERNO 0",0.0,],
                    ["Apocalypse","EXPERT 12",12.4,false,"INFERNO 0",0.0,],
                    ["You are the Miserable","EXPERT 13+",13.9,false,"INFERNO 0",0.0,],
                    ["Stasis","EXPERT 13",13.6,false,"INFERNO 0",0.0,],
                    ["Rainmaker","EXPERT 13",13.5,false,"INFERNO 0",0.0,],
                    ["Weg","EXPERT 12",12.3,false,"INFERNO 0",0.0,],
                    ["From Zero feat. 利香","EXPERT 11+",11.8,false,"INFERNO 0",0.0,],
                    ["PRESS START!","EXPERT 12+",12.7,false,"INFERNO 0",0.0,],
                    ["TWISTSTEP","EXPERT 12+",12.7,false,"INFERNO 0",0.0,],
                    ["Future Cαndy","EXPERT 12+",12.7,false,"INFERNO 0",0.0,],
                    ["Fish Fight!","EXPERT 11",11.6,false,"INFERNO 0",0.0,],
                    ["THERAPY","EXPERT 12+",12.7,false,"INFERNO 0",0.0,],
                    ["グルーヴ・ザ・ハート","EXPERT 12",12.5,false,"INFERNO 0",0.0,],
                    ["Got more raves?","EXPERT 13",13.5,false,"INFERNO 0",0.0,],
                    ["Good Night, Bad Luck.","EXPERT 13+",13.7,false,"INFERNO 0",0.0,],
                    ["Grayed Out-Antifront-","EXPERT 13",13.2,false,"INFERNO 0",0.0,],
                    ["インドア系ならトラックメイカー","EXPERT 12+",12.9,false,"INFERNO 0",0.0,],
                    ["ダンシング☆サムライ","EXPERT 10",10.5,false,"INFERNO 0",0.0,],
                    ["WHITE","EXPERT 10",10.5,false,"INFERNO 0",0.0,],
                    ["Brain Power","EXPERT 13",13.0,false,"INFERNO 0",0.0,],
                    ["聖者の鼓動","EXPERT 12",12.4,false,"INFERNO 0",0.0,],
                    ["BUCHiGiRE Berserker","EXPERT 13+",13.9,false,"INFERNO 0",0.0,],
                    ["君のStarlight Road","EXPERT 10",10.3,false,"INFERNO 0",0.0,],
                    ["FUJIN Rumble","EXPERT 13",13.6,false,"INFERNO 0",0.0,],
                    ["Eyes on me feat. Such","EXPERT 12",12.4,false,"INFERNO 0",0.0,],
                    ["GOODWORLD","EXPERT 12",12.6,false,"INFERNO 0",0.0,],
                    ["Altale","EXPERT 12",12.3,false,"INFERNO 0",0.0,],
                    ["ベースラインやってる？笑","EXPERT 12",12.2,false,"INFERNO 0",0.0,],
                    ["EU over Progress","EXPERT 12+",12.7,false,"INFERNO 0",0.0,],
                    ["燐廻","EXPERT 11",11.1,false,"INFERNO 0",0.0,],
                    ["『エキセントリック少年ボウイ』のテーマ","EXPERT 12",12.6,false,"INFERNO 0",0.0,],
                    ["Jägermeister","EXPERT 11",11.2,false,"INFERNO 0",0.0,],
                    ["What's this?","EXPERT 10",10.2,false,"INFERNO 0",0.0,],
                    ["FREEDOM DiVE↓","EXPERT 13+",13.9,false,"INFERNO 0",0.0,],
                    ["Honey Panic!","EXPERT 12",12.0,false,"INFERNO 0",0.0,],
                    ["Pixel Galaxy","EXPERT 10+",10.8,false,"INFERNO 0",0.0,],
                    ["集結の華々","EXPERT 10+",10.9,false,"INFERNO 0",0.0,],
                    ["conflict","EXPERT 13",13.4,false,"INFERNO 0",0.0,],
                    ["こんにちは、ARuFaです。","EXPERT 10",10.4,false,"INFERNO 0",0.0,],
                    ["ぼくの夢、メチャクソ無限湧き","EXPERT 12",12.6,false,"INFERNO 13+",13.8,false],
                    ["ゲームオーバー (feat. TORIENA)","EXPERT 11+",11.7,false,"INFERNO 0",0.0,],
                    ["ルーンファクトリー４スペシャルより「この想いを乗せて」","EXPERT 9",9.0,false,"INFERNO 0",0.0,],
                    ["Ouvertüre","EXPERT 13",13.3,true,"INFERNO 0",0.0,],
                    ["Love Kills U","EXPERT 12",12.5,true,"INFERNO 0",0.0,],
                    ["Kira☆Kira☆Night","EXPERT 12+",12.9,true,"INFERNO 0",0.0,],
                    ["YOG","EXPERT 13+",13.8,true,"INFERNO 0",0.0,],
                    ["Lost Illusion","EXPERT 12+",12.7,false,"INFERNO 0",0.0,],
                    ["Cauliflower","EXPERT 12+",12.8,false,"INFERNO 0",0.0,],
                    ["Purple Skies","EXPERT 12",12.4,false,"INFERNO 0",0.0,],
                    ["Lhaksha","EXPERT 12",12.5,false,"INFERNO 0",0.0,],
                    ["LIN NE KRO NE feat. lasah","EXPERT 13+",13.7,false,"INFERNO 0",0.0,],
                    ["フリーフォール","EXPERT 12+",12.7,false,"INFERNO 0",0.0,],
                    ["猫娘","EXPERT 13+",13.7,false,"INFERNO 0",0.0,],
                    ["QiXiN MAdN3ss 2153","EXPERT 13+",13.9,false,"INFERNO 0",0.0,],
                    ["ARTEMiS","EXPERT 13+",13.9,false,"INFERNO 0",0.0,],
                    ["with U","EXPERT 11+",11.8,false,"INFERNO 13",13.6,false],
                    ["Tell Me","EXPERT 11+",11.8,false,"INFERNO 0",0.0,],
                    ["LETHAL;WEAPON","EXPERT 12+",12.9,false,"INFERNO 0",0.0,],
                    ["THE MUZZLE FACING","EXPERT 13+",13.8,false,"INFERNO 0",0.0,],
                    ["GASHATT","EXPERT 12",12.4,false,"INFERNO 0",0.0,],
                    ["Demon's Rave","EXPERT 12+",12.8,false,"INFERNO 0",0.0,],
                    ["jacaranda","EXPERT 12+",12.7,false,"INFERNO 0",0.0,],
                    ["CHECKER FLAG","EXPERT 12+",12.9,false,"INFERNO 0",0.0,],
                    ["Stratoliner","EXPERT 12+",12.8,false,"INFERNO 0",0.0,],
                    ["Utopia feat. shully","EXPERT 12",12.6,false,"INFERNO 0",0.0,],
                    ["Let you DIVE!","EXPERT 11+",11.8,false,"INFERNO 13",13.4,false],
                    ["Break Through Myself feat. Risa Yuzuki","EXPERT 13",13.4,true,"INFERNO 0",0.0,],
                    ["D3LTA QOMPLEX","EXPERT 13",13.1,true,"INFERNO 0",0.0,],
                    ["Chobit Flavor","EXPERT 12",12.6,true,"INFERNO 0",0.0,],
                    ["Machinery of Avoid","EXPERT 12+",12.7,true,"INFERNO 0",0.0,],
                    ["Datamania (tpz Overheat Remix)","EXPERT 12",12.6,true,"INFERNO 0",0.0,],
                    ["超MANJIラッシュ","EXPERT 13+",13.7,true,"INFERNO 0",0.0,],
                    ["Meta-Mysteria","EXPERT 14",14.1,true,"INFERNO 0",0.0,],
                    ["Eternal Ending","EXPERT 13",13.4,false,"INFERNO 0",0.0,],
                    ["EVE","EXPERT 13",13.1,false,"INFERNO 0",0.0,],
                    ["eden","EXPERT 13",13.3,false,"INFERNO 14",14.1,false],
                    ["Silentphobia","EXPERT 13",13.6,false,"INFERNO 14",14.1,false],
                    ["やけにインザレイン feat. 小林私","EXPERT 13",13.1,false,"INFERNO 0",0.0,],
                    ["Traveller feat.moimoi","EXPERT 12",12.4,false,"INFERNO 0",0.0,],
                    ["FLVSH OUT","EXPERT 13",13.5,false,"INFERNO 0",0.0,],
                    ["BSCS","EXPERT 13",13.3,false,"INFERNO 0",0.0,],
                    ["Popping Happiness!","EXPERT 12",12.4,false,"INFERNO 0",0.0,],
                    ["Madwing","EXPERT 12+",12.8,false,"INFERNO 0",0.0,],
                    ["TRICKL4SH 220","EXPERT 13+",13.8,false,"INFERNO 0",0.0,],
                    ["SHAKE!","EXPERT 12+",12.7,false,"INFERNO 0",0.0,],
                    ["DUAL BREAKER XX","EXPERT 13+",13.8,false,"INFERNO 0",0.0,],
                    ["Megaton Killer","EXPERT 13",13.6,false,"INFERNO 0",0.0,],
                    ["ATAMA WARUI","EXPERT 12+",12.9,false,"INFERNO 0",0.0,],
                    ["Liberate","EXPERT 13",13.1,false,"INFERNO 0",0.0,],
                    ["Animosity","EXPERT 13+",13.8,false,"INFERNO 0",0.0,],
                    ["Big Bang","EXPERT 14",14.0,false,"INFERNO 0",0.0,],
                    ["恋メタル","EXPERT 12+",12.7,false,"INFERNO 0",0.0,],
                    ["はげしこの夜 -Psylent Crazy Night-","EXPERT 13+",13.7,false,"INFERNO 0",0.0,],
                    ["パニックポップ☆フェスティバル!!!","EXPERT 13",13.3,false,"INFERNO 0",0.0,],
                    ["Stasis feat.motoko -WACCA EDiT-","EXPERT 12+",12.7,false,"INFERNO 0",0.0,],
                    ["RAV#GIRL","EXPERT 12",12.6,false,"INFERNO 0",0.0,],
                    ["KALACAKLA","EXPERT 12+",12.7,false,"INFERNO 0",0.0,],
                    ["Poppin' Shower","EXPERT 12",12.5,false,"INFERNO 0",0.0,],
                    ["While Shining feat.Yukacco","EXPERT 12",12.3,false,"INFERNO 0",0.0,],
                    ["ALiVE","EXPERT 11",11.0,false,"INFERNO 0",0.0,],
                    ["ONOMATO Pairing!!!","EXPERT 12",12.4,false,"INFERNO 0",0.0,],
                    ["SUPER REACTOR","EXPERT 13",13.0,false,"INFERNO 0",0.0,],
                    ["GENOCIDER","EXPERT 14",14.1,false,"INFERNO 0",0.0,],
                    ["ツアー・ファイナル","EXPERT 12",12.3,false,"INFERNO 0",0.0,],
                    ["Metamorphose","EXPERT 12+",12.7,false,"INFERNO 0",0.0,],
                    ["MAGiC4LG1RL M3GA S7R1KE!","EXPERT 13",13.1,false,"INFERNO 0",0.0,],
                    ["METEOR BURST","EXPERT 13+",13.8,false,"INFERNO 0",0.0,],
                    ["XTREME","EXPERT 12+",12.9,false,"INFERNO 14",14.0,false],
                    ["天使光輪","EXPERT 13",13.2,false,"INFERNO 14",14.1,false],
                    ["Ultra Red","EXPERT 12+",12.8,false,"INFERNO 0",0.0,],
                    ["サイクルヒット","EXPERT 13",13.5,false,"INFERNO 0",0.0,],
                    ["Strange Bar","EXPERT 12+",12.8,false,"INFERNO 0",0.0,],
                    ["Murasaki","EXPERT 12",12.4,false,"INFERNO 0",0.0,],
                    ["Mazy Metroplex","EXPERT 13+",13.7,false,"INFERNO 0",0.0,],
                    ["LOSE CONTROL","EXPERT 11",11.3,false,"INFERNO 0",0.0,],
                    ["†DOOF†SENC†","EXPERT 13",13.6,false,"INFERNO 0",0.0,],
                    ["Shiny Memory feat.Yukacco","EXPERT 12",12.5,false,"INFERNO 0",0.0,],
                    ["BLVST BEVT","EXPERT 12",12.6,false,"INFERNO 0",0.0,],
                    ["JINGLE DEATH","EXPERT 13",13.2,false,"INFERNO 0",0.0,],
                    ["Invisible Frenzy","EXPERT 14",14.0,false,"INFERNO 0",0.0,],
                    ["VOX Diamond","EXPERT 12",12.6,false,"INFERNO 0",0.0,],
                    ["Chariot","EXPERT 12",12.4,false,"INFERNO 0",0.0,],
                    ["Akareram","EXPERT 11+",11.7,false,"INFERNO 0",0.0,],
                    ["Galaxy Friends","EXPERT 12+",12.7,false,"INFERNO 0",0.0,],
                    ["13 Donkeys","EXPERT 12",12.2,false,"INFERNO 0",0.0,],
                    ["ADAM","EXPERT 13",13.4,false,"INFERNO 0",0.0,],
                    ["ATARAX1A","EXPERT 12",12.5,false,"INFERNO 0",0.0,],
                    ["HiGHER","EXPERT 12",12.2,false,"INFERNO 0",0.0,],
                    ["Source of Creation","EXPERT 11",11.3,false,"INFERNO 0",0.0,],
                    ["Exitium","EXPERT 14",14.1,false,"INFERNO 0",0.0,],
                    ["Blaze","EXPERT 11+",11.7,false,"INFERNO 0",0.0,],
                    ["GRiDGALAXY","EXPERT 11",11.5,false,"INFERNO 0",0.0,],
                    ["Jingle","EXPERT 11",11.3,false,"INFERNO 0",0.0,],
                    ["BATTLE NO.1","EXPERT 13+",13.7,false,"INFERNO 0",0.0,],
                    ["LEVATEiN feat. 野宮あゆみ","EXPERT 12",12.5,false,"INFERNO 0",0.0,],
                    ["BIG HEAD BANGING","EXPERT 13+",13.8,false,"INFERNO 0",0.0,],
                    ["Knight Rider","EXPERT 13",13.3,false,"INFERNO 0",0.0,],
                    ["PARALLEL★PRISM","EXPERT 10+",10.8,false,"INFERNO 0",0.0,],
                    ["Rainbow Dream","EXPERT 11",11.4,false,"INFERNO 0",0.0,],
                    ["Quon","EXPERT 12+",12.8,false,"INFERNO 13+",13.9,false],
                    ["Poseidon","EXPERT 13+",13.8,false,"INFERNO 0",0.0,],
                    ["HELL FLAME","EXPERT 12+",12.7,false,"INFERNO 13+",13.9,true],
                    ["Gate One","EXPERT 12",12.0,false,"INFERNO 0",0.0,],
                    ["Over My Hand","EXPERT 11",11.1,false,"INFERNO 0",0.0,],
                    ["Are You Ready","EXPERT 12",12.5,false,"INFERNO 0",0.0,],
                    ["MEMORiZE","EXPERT 10",10.0,false,"INFERNO 0",0.0,],
                    ["illanai-assorted","EXPERT 12+",12.9,false,"INFERNO 0",0.0,],
                    ["Sunshine","EXPERT 11",11.3,false,"INFERNO 0",0.0,],
                    ["BOOM! BOOM!! BOOM!!!","EXPERT 12",12.3,false,"INFERNO 0",0.0,],
                    ["Ever Free(Raw Edit)","EXPERT 10",10.1,false,"INFERNO 0",0.0,],
                    ["Try again","EXPERT 10",10.6,false,"INFERNO 0",0.0,],
                    ["BLUE SKY feat. 野宮あゆみ","EXPERT 10",10.4,false,"INFERNO 0",0.0,],
                    ["Sound Chimera","EXPERT 12+",12.8,false,"INFERNO 13+",13.9,false],
                    ["Soldiers","EXPERT 11+",11.9,false,"INFERNO 0",0.0,],
                    ["Fight for the CORE feat. Daisuke","EXPERT 12",12.6,false,"INFERNO 0",0.0,],
                    ["Shining Harmony","EXPERT 12",12.2,false,"INFERNO 0",0.0,]
                ];
            }
        </script>
    </head>
    <body>
        <div class="container">
            <!-- ヘッダー -->
            <div class="bg-light border border-secondary rounded mt-2 shadow-sm">
                <div class="d-flex flex-wrap m-2">
                    <div class="navbar-brand">WACCA RATING ANALYZER</div>
                    <button type="button" class="btn btn-sm btn-outline-primary" id="twitter" onclick="openDevsTwitter()">
                        <small>DEV. BY</small>
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-twitter" viewBox="0 0 16 16">
                            <path d="M5.026 15c6.038 0 9.341-5.003 9.341-9.334 0-.14 0-.282-.006-.422A6.685 6.685 0 0 0 16 3.542a6.658 6.658 0 0 1-1.889.518 3.301 3.301 0 0 0 1.447-1.817 6.533 6.533 0 0 1-2.087.793A3.286 3.286 0 0 0 7.875 6.03a9.325 9.325 0 0 1-6.767-3.429 3.289 3.289 0 0 0 1.018 4.382A3.323 3.323 0 0 1 .64 6.575v.045a3.288 3.288 0 0 0 2.632 3.218 3.203 3.203 0 0 1-.865.115 3.23 3.23 0 0 1-.614-.057 3.283 3.283 0 0 0 3.067 2.277A6.588 6.588 0 0 1 .78 13.58a6.32 6.32 0 0 1-.78-.045A9.344 9.344 0 0 0 5.026 15z"/>
                        </svg>
                        @shimmand
                    </button>
                </div>
                <hr class="m-0">
                <div class="m-2">
                    <span class="badge bg-secondary align-middle me-1">DATASET</span>
                    <code class="me-1">2021-11-17</code>
                    <!-- アラート -->
                    <div class="alert alert-primary alert-dismissible fade show mt-2 mb-0 p-2 d-none" role="alert">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-bell" viewBox="0 0 16 16">
                            <path d="M8 16a2 2 0 0 0 2-2H6a2 2 0 0 0 2 2zM8 1.918l-.797.161A4.002 4.002 0 0 0 4 6c0 .628-.134 2.197-.459 3.742-.16.767-.376 1.566-.663 2.258h10.244c-.287-.692-.502-1.49-.663-2.258C12.134 8.197 12 6.628 12 6a4.002 4.002 0 0 0-3.203-3.92L8 1.917zM14.22 12c.223.447.481.801.78 1H1c.299-.199.557-.553.78-1C2.68 10.2 3 6.88 3 6c0-2.42 1.72-4.44 4.005-4.901a1 1 0 1 1 1.99 0A5.002 5.002 0 0 1 13 6c0 .88.32 4.2 1.22 6z"/>
                        </svg>
                        <div class="ms-2">
                            <div class="fst-normal">
                                <span class="lang-jpn">ただいま<strong>2021-MM-DD</strong>に収録された譜面の定数を検証しています。</span>
                                <span class="lang-eng d-none">We are now checking the constant of the charts added on <strong>2021-MM-DD</strong>.</span>
                            </div>
                        </div>
                    </div>
                    <div class="alert alert-primary alert-dismissible fade show mt-2 mb-0 p-2" role="alert">
                        <div class="ms-2">
                            <div class="fst-normal">
                                <span class="lang-jpn">WACCAのv3.03.00において、レーティングの計算に不具合が発生しています。そのため、筐体やマイページで確認できるレーティングは、このプログラムで計算したものと異なります。<a class="alert-link" href="https://info-wacca.marv.jp/article/13637">詳細はこちら...</a></span>
                                <span class="lang-eng d-none">In WACCA v3.03.00, there is a problem with the calculation of ratings. Therefore, the ratings you can see in the machine and My Page are different from the ones calculated by this program. <a class="alert-link" href="https://info-wacca.marv.jp/article/13637">Learn more...</a></span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- プレイデータのテキストエリア -->
            <div class="form-floating mt-2">
                <textarea class="form-control playdata shadow-sm" id="playdata" placeholder="Paste your playdata here"></textarea>
                <label for="playdata">
                    <span class="lang-jpn">プレイデータ</span>
                    <span class="lang-eng d-none">Play Data</span>
                </label>
                <div class="position-absolute top-50 end-0 translate-middle-y">
                    <button type="button" class="btn btn-outline-danger shadow-sm" onclick="javascript:document.querySelectorAll('#playdata')[0].value = ''">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash" viewBox="0 0 16 16">
                            <path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"/>
                            <path fill-rule="evenodd" d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"/>
                        </svg>
                        <span class="lang-jpn">クリア</span>
                        <span class="lang-eng d-none">Clear</span>
                    </button>
                </div>
                <div class="valid-feedback">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-check-circle" viewBox="0 0 16 16">
                        <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
                        <path d="M10.97 4.97a.235.235 0 0 0-.02.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-1.071-1.05z"/>
                    </svg>
                    <span class="lang-jpn">
                        分析が完了しました！
                    </span>
                    <span class="lang-eng d-none">
                        Analysis complete!
                    </span>
                </div>
                <div class="invalid-feedback error-feedback-1 d-none" id="warning-denied">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-exclamation-circle" viewBox="0 0 16 16">
                        <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
                        <path d="M7.002 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 4.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 4.995z"/>
                    </svg>
                    <span class="lang-jpn">
                        クリップボードへアクセスできません。
                        <span class="badge border border-danger text-danger align-bottom ms-1 me-1">ペースト</span>
                        または
                        <span class="badge border border-danger text-danger align-bottom ms-1 me-1">許可</span>
                        を押してください。
                    </span>
                    <span class="lang-eng d-none">
                        Allow your browser to access the clipboard.
                        After pressing
                        <span class="badge border border-danger text-danger align-bottom ms-1 me-1">Load Your Data</span>
                        , please press
                        <span class="badge border border-danger text-danger align-bottom ms-1 me-1">Paste</span>
                        or
                        <span class="badge border border-danger text-danger align-bottom ms-1 me-1">Allow</span>
                        .
                    </span>
                </div>
                <div class="invalid-feedback error-feedback-1 d-none" id="warning-empty">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-exclamation-circle" viewBox="0 0 16 16">
                        <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
                        <path d="M7.002 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 4.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 4.995z"/>
                    </svg>
                    <span class="lang-jpn">
                        データが空です。
                        <span class="badge border border-danger text-danger align-bottom ms-1 me-1">データを読込</span>
                        を押してください。
                    </span>
                    <span class="lang-eng d-none">
                        Text field (i.e. your playdata) is empty.
                        If you haven't pressed
                        <span class="badge border border-danger text-danger align-bottom ms-1 me-1">Load Your Data</span>
                        yet, please do so first.
                    </span>
                </div>
                <div class="invalid-feedback error-feedback-1 d-none" id="warning-invalid">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-exclamation-circle" viewBox="0 0 16 16">
                        <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
                        <path d="M7.002 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 4.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 4.995z"/>
                    </svg>
                    <span class="lang-jpn">
                        データの形式が不正です。
                        お手数ですが、マイページに戻って再度ブックマークレットを実行してください。
                    </span>
                    <span class="lang-eng d-none">
                        Your browser was not able to retrieve your play data correctly.
                        Please go back to "mypage" and run the bookmarklet again.
                    </span>
                </div>
            </div>
            <!-- ボタングループ -->
            <div class="mt-2">
                <div class="btn-toolbar" role="toolbar">
                    <div class="btn-group me-2" role="group">
                        <button type="button" class="btn btn-outline-primary" id="paste" onclick="paste()">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-upload" viewBox="0 0 16 16">
                                <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z"/>
                                <path d="M7.646 1.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 2.707V11.5a.5.5 0 0 1-1 0V2.707L5.354 4.854a.5.5 0 1 1-.708-.708l3-3z"/>
                            </svg>
                            <span class="position-absolute top-0 start-50 translate-middle badge rounded bg-primary">STEP 1</span>
                            <span class="lang-jpn">データを読込</span>
                            <span class="lang-eng d-none">Load Your Data</span>
                        </button>
                        <button type="button" class="btn btn-outline-primary" id="analyze" onclick="analyze()">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-search" viewBox="0 0 16 16">
                                <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/>
                            </svg>
                            <span class="position-absolute top-0 start-50 translate-middle badge rounded bg-primary">STEP 2</span>
                            <span class="lang-jpn">分析を実行</span>
                            <span class="lang-eng d-none">Start Analysis</span>
                        </button>
                    </div>
                    <div class="btn-group me-2" role="group">
                        <button type="button" class="btn btn-outline-primary" data-bs-toggle="modal" data-bs-target="#helpModal">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-question-circle" viewBox="0 0 16 16">
                                <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
                                <path d="M5.255 5.786a.237.237 0 0 0 .241.247h.825c.138 0 .248-.113.266-.25.09-.656.54-1.134 1.342-1.134.686 0 1.314.343 1.314 1.168 0 .635-.374.927-.965 1.371-.673.489-1.206 1.06-1.168 1.987l.003.217a.25.25 0 0 0 .25.246h.811a.25.25 0 0 0 .25-.25v-.105c0-.718.273-.927 1.01-1.486.609-.463 1.244-.977 1.244-2.056 0-1.511-1.276-2.241-2.673-2.241-1.267 0-2.655.59-2.75 2.286zm1.557 5.763c0 .533.425.927 1.01.927.609 0 1.028-.394 1.028-.927 0-.552-.42-.94-1.029-.94-.584 0-1.009.388-1.009.94z"/>
                            </svg>
                            <span class="lang-jpn">ヘルプ</span>
                            <span class="lang-eng d-none">Help</span>
                        </button>
                        <button type="button" class="btn btn-outline-primary" id="save" onclick="saveAsCSV()">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-table" viewBox="0 0 16 16">
                                <path d="M0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2zm15 2h-4v3h4V4zm0 4h-4v3h4V8zm0 4h-4v3h3a1 1 0 0 0 1-1v-2zm-5 3v-3H6v3h4zm-5 0v-3H1v2a1 1 0 0 0 1 1h3zm-4-4h4V8H1v3zm0-4h4V4H1v3zm5-3v3h4V4H6zm4 4H6v3h4V8z"/>
                            </svg>
                            <span class="lang-jpn">CSVで保存</span>
                            <span class="lang-eng d-none">Save as CSV</span>
                        </button>
                        <button type="button" class="btn btn-outline-primary" id="help" onclick="openChartsData()">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-bar-chart-line" viewBox="0 0 16 16">
                                <path d="M11 2a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v12h.5a.5.5 0 0 1 0 1H.5a.5.5 0 0 1 0-1H1v-3a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v3h1V7a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v7h1V2zm1 12h2V2h-2v12zm-3 0V7H7v7h2zm-5 0v-3H2v3h2z"/>
                            </svg>
                            <span class="lang-jpn">譜面データ</span>
                            <span class="lang-eng d-none">Charts Dataset</span>
                        </button>
                    </div>
                    <div class="btn-group me-2" role="group">
                        <button type="button" class="btn btn-outline-primary" id="btn-japanese" onclick="switchToJapanese()">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-globe" viewBox="0 0 16 16">
                                <path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm7.5-6.923c-.67.204-1.335.82-1.887 1.855A7.97 7.97 0 0 0 5.145 4H7.5V1.077zM4.09 4a9.267 9.267 0 0 1 .64-1.539 6.7 6.7 0 0 1 .597-.933A7.025 7.025 0 0 0 2.255 4H4.09zm-.582 3.5c.03-.877.138-1.718.312-2.5H1.674a6.958 6.958 0 0 0-.656 2.5h2.49zM4.847 5a12.5 12.5 0 0 0-.338 2.5H7.5V5H4.847zM8.5 5v2.5h2.99a12.495 12.495 0 0 0-.337-2.5H8.5zM4.51 8.5a12.5 12.5 0 0 0 .337 2.5H7.5V8.5H4.51zm3.99 0V11h2.653c.187-.765.306-1.608.338-2.5H8.5zM5.145 12c.138.386.295.744.468 1.068.552 1.035 1.218 1.65 1.887 1.855V12H5.145zm.182 2.472a6.696 6.696 0 0 1-.597-.933A9.268 9.268 0 0 1 4.09 12H2.255a7.024 7.024 0 0 0 3.072 2.472zM3.82 11a13.652 13.652 0 0 1-.312-2.5h-2.49c.062.89.291 1.733.656 2.5H3.82zm6.853 3.472A7.024 7.024 0 0 0 13.745 12H11.91a9.27 9.27 0 0 1-.64 1.539 6.688 6.688 0 0 1-.597.933zM8.5 12v2.923c.67-.204 1.335-.82 1.887-1.855.173-.324.33-.682.468-1.068H8.5zm3.68-1h2.146c.365-.767.594-1.61.656-2.5h-2.49a13.65 13.65 0 0 1-.312 2.5zm2.802-3.5a6.959 6.959 0 0 0-.656-2.5H12.18c.174.782.282 1.623.312 2.5h2.49zM11.27 2.461c.247.464.462.98.64 1.539h1.835a7.024 7.024 0 0 0-3.072-2.472c.218.284.418.598.597.933zM10.855 4a7.966 7.966 0 0 0-.468-1.068C9.835 1.897 9.17 1.282 8.5 1.077V4h2.355z"/>
                            </svg>
                            Japanese
                        </button>
                        <button type="button" class="btn btn-outline-primary" id="btn-english" onclick="switchToEnglish()">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-globe" viewBox="0 0 16 16">
                                <path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm7.5-6.923c-.67.204-1.335.82-1.887 1.855A7.97 7.97 0 0 0 5.145 4H7.5V1.077zM4.09 4a9.267 9.267 0 0 1 .64-1.539 6.7 6.7 0 0 1 .597-.933A7.025 7.025 0 0 0 2.255 4H4.09zm-.582 3.5c.03-.877.138-1.718.312-2.5H1.674a6.958 6.958 0 0 0-.656 2.5h2.49zM4.847 5a12.5 12.5 0 0 0-.338 2.5H7.5V5H4.847zM8.5 5v2.5h2.99a12.495 12.495 0 0 0-.337-2.5H8.5zM4.51 8.5a12.5 12.5 0 0 0 .337 2.5H7.5V8.5H4.51zm3.99 0V11h2.653c.187-.765.306-1.608.338-2.5H8.5zM5.145 12c.138.386.295.744.468 1.068.552 1.035 1.218 1.65 1.887 1.855V12H5.145zm.182 2.472a6.696 6.696 0 0 1-.597-.933A9.268 9.268 0 0 1 4.09 12H2.255a7.024 7.024 0 0 0 3.072 2.472zM3.82 11a13.652 13.652 0 0 1-.312-2.5h-2.49c.062.89.291 1.733.656 2.5H3.82zm6.853 3.472A7.024 7.024 0 0 0 13.745 12H11.91a9.27 9.27 0 0 1-.64 1.539 6.688 6.688 0 0 1-.597.933zM8.5 12v2.923c.67-.204 1.335-.82 1.887-1.855.173-.324.33-.682.468-1.068H8.5zm3.68-1h2.146c.365-.767.594-1.61.656-2.5h-2.49a13.65 13.65 0 0 1-.312 2.5zm2.802-3.5a6.959 6.959 0 0 0-.656-2.5H12.18c.174.782.282 1.623.312 2.5h2.49zM11.27 2.461c.247.464.462.98.64 1.539h1.835a7.024 7.024 0 0 0-3.072-2.472c.218.284.418.598.597.933zM10.855 4a7.966 7.966 0 0 0-.468-1.068C9.835 1.897 9.17 1.282 8.5 1.077V4h2.355z"/>
                            </svg>
                            English
                        </button>
                    </div>
                </div>
                <div class="accordion border border-primary rounded my-2" id="accordion-if-doesnt-work">
                    <div class="accordion-item">
                        <div class="h2 accordion-header" id="accordion-if-doesnt-work-1">
                            <button class="accordion-button collapsed text-primary p-2" type="button" data-bs-toggle="collapse" data-bs-target="#collapse-if-doesnt-work-1" aria-expanded="false" aria-controls="collapse-if-doesnt-work-1">
                                <span class="me-1">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-question-circle" viewBox="0 0 16 16">
                                        <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
                                        <path d="M5.255 5.786a.237.237 0 0 0 .241.247h.825c.138 0 .248-.113.266-.25.09-.656.54-1.134 1.342-1.134.686 0 1.314.343 1.314 1.168 0 .635-.374.927-.965 1.371-.673.489-1.206 1.06-1.168 1.987l.003.217a.25.25 0 0 0 .25.246h.811a.25.25 0 0 0 .25-.25v-.105c0-.718.273-.927 1.01-1.486.609-.463 1.244-.977 1.244-2.056 0-1.511-1.276-2.241-2.673-2.241-1.267 0-2.655.59-2.75 2.286zm1.557 5.763c0 .533.425.927 1.01.927.609 0 1.028-.394 1.028-.927 0-.552-.42-.94-1.029-.94-.584 0-1.009.388-1.009.94z"/>
                                    </svg>
                                </span>
                                <span class="lang-jpn">
                                    <span class="badge border border-primary text-primary align-bottom">データを読込</span> が動作しない場合
                                </span>
                                <span class="lang-eng d-none">
                                    If <span class="badge border border-primary text-primary align-bottom">Load Your Data</span> does not work
                                </span>
                            </button>
                        </div>
                        <div id="collapse-if-doesnt-work-1" class="accordion-collapse collapse" aria-labelledby="accordion-if-doesnt-work-1" data-bs-parent="#accordion-if-doesnt-work">
                            <div class="accordion-body p-2">
                                <span class="lang-jpn">
                                    <span class="badge border border-secondary text-secondary align-bottom">データを読込</span> が動作しない場合、代わりにプレイデータ欄へクリップボードの内容を貼り付け、そのまま <span class="badge border border-secondary text-secondary align-bottom">分析を実行</span> を押してください。
                                </span>
                                <span class="lang-eng d-none">
                                    If nothing happens when you press <span class="badge border border-secondary text-secondary align-bottom">Load Your Data</span>, paste the clipboard contents into the Play Data field instead, and then press <span class="badge border border-secondary text-secondary align-bottom">Start Analysis</span>.
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- 表示設定 -->
            <div class="mt-2">
                <div class="navbar sticky-top refresh-target fade" style="opacity: 0.9; background-color: var(--bs-white);">
                    <div class="h3 mb-0">
                        <span class="lang-jpn">設定</span>
                        <span class="lang-eng d-none">Settings</span>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-4">
                        <div class="card shadow-sm">
                            <div class="card-header">
                                <span class="lang-jpn">表示する譜面</span>
                                <span class="lang-eng d-none">Charts to Display</span>
                            </div>
                            <div class="card-body">
                                <div class="btn-group" role="group">
                                    <input type="radio" class="btn-check" name="radio1" id="radio1-1" autocomplete="off" onchange="changeDisplayState(0)" disabled checked>
                                    <label class="btn btn-outline-primary" for="radio1-1">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-check-circle" viewBox="0 0 16 16">
                                            <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
                                            <path d="M10.97 4.97a.235.235 0 0 0-.02.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-1.071-1.05z"/>
                                        </svg>
                                        <span class="position-absolute top-0 start-50 translate-middle badge rounded bg-primary">DEFAULT</span>
                                        <span class="lang-jpn">すべて</span>
                                        <span class="lang-eng d-none">All</span>
                                    </label>
                                    <input type="radio" class="btn-check" name="radio1" id="radio1-2" autocomplete="off" onchange="changeDisplayState(1)" disabled>
                                    <label class="btn btn-outline-primary" for="radio1-2">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-exclamation-circle" viewBox="0 0 16 16">
                                            <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
                                            <path d="M7.002 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 4.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 4.995z"/>
                                        </svg>
                                        <span class="lang-jpn">対象と候補</span>
                                        <span class="lang-eng d-none">Summarized</span>
                                    </label>
                                    <input type="radio" class="btn-check" name="radio1" id="radio1-3" autocomplete="off" onchange="changeDisplayState(2)" disabled>
                                    <label class="btn btn-outline-primary" for="radio1-3">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x-circle" viewBox="0 0 16 16">
                                            <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
                                            <path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"/>
                                        </svg>
                                        <span class="lang-jpn">候補のみ</span>
                                        <span class="lang-eng d-none">Focused</span>
                                    </label>
                                </div>
                                <div class="accordion border border-primary rounded my-2" id="accordion-display-option">
                                    <div class="accordion-item">
                                        <div class="h2 accordion-header" id="accordion-display-option-1">
                                            <button class="accordion-button collapsed text-primary p-2" type="button" data-bs-toggle="collapse" data-bs-target="#collapse-display-option-1" aria-expanded="false" aria-controls="collapse-display-option-1">
                                                <span class="me-1">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-question-circle" viewBox="0 0 16 16">
                                                        <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
                                                        <path d="M5.255 5.786a.237.237 0 0 0 .241.247h.825c.138 0 .248-.113.266-.25.09-.656.54-1.134 1.342-1.134.686 0 1.314.343 1.314 1.168 0 .635-.374.927-.965 1.371-.673.489-1.206 1.06-1.168 1.987l.003.217a.25.25 0 0 0 .25.246h.811a.25.25 0 0 0 .25-.25v-.105c0-.718.273-.927 1.01-1.486.609-.463 1.244-.977 1.244-2.056 0-1.511-1.276-2.241-2.673-2.241-1.267 0-2.655.59-2.75 2.286zm1.557 5.763c0 .533.425.927 1.01.927.609 0 1.028-.394 1.028-.927 0-.552-.42-.94-1.029-.94-.584 0-1.009.388-1.009.94z"/>
                                                    </svg>
                                                </span>
                                                <span class="lang-jpn">この設定について</span>
                                                <span class="lang-eng d-none">About this section</span>
                                            </button>
                                        </div>
                                        <div id="collapse-display-option-1" class="accordion-collapse collapse" aria-labelledby="accordion-display-option-1" data-bs-parent="#accordion-display-option">
                                            <div class="accordion-body p-2">
                                                <span class="lang-jpn">
                                                    <span class="badge border border-secondary text-secondary align-bottom">候補のみ</span> は、レーティング候補の譜面のみを表示します。レーティングの上昇に影響しない譜面を表示したくない場合にご利用ください。 <span class="badge border border-secondary text-secondary align-bottom">対象と候補</span> は、レーティング候補の譜面およびレーティング対象の譜面を表示します。
                                                </span>
                                                <span class="lang-eng d-none">
                                                    <span class="badge border border-secondary text-secondary align-bottom">Focused</span> will show only the Rating Candidates charts. Use this option if you do not want to show charts that do not affect the rating increase. <span class="badge border border-secondary text-secondary align-bottom">Summarized</span> will show the Rating Candidates charts and the Rating Target charts.
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- 概要 -->
            <div class="mt-2">
                <div class="navbar sticky-top refresh-target fade" style="opacity: 0.9; background-color: var(--bs-white);">
                    <div class="h3 mb-0">
                        <span class="lang-jpn">概要</span>
                        <span class="lang-eng d-none">Summary</span>
                    </div>
                    <div class="h6 mb-0 text-end">
                        <div class="pb-1">
                            <span class="badge border border-secondary text-dark align-middle me-1">
                                <span class="lang-jpn">合計</span>
                                <span class="lang-eng d-none">Total</span>
                            </span>
                            <span class="total-rate-current me-1 align-middle">0.00</span>
                            <span class="badge border border-secondary text-dark align-middle me-1">
                                <span class="lang-jpn">理論値</span>
                                <span class="lang-eng d-none">Max</span>
                            </span>
                            <span class="total-rate-upper align-middle">0.00</span>
                        </div>
                    </div>
                </div>
                <div class="rate-graph">
                    <div class="position-relative graph-bar mx-4 my-2">
                        <div class="progress shadow-sm">
                            <div class="progress-bar graph-bar-rate bg-plain bg-gradient" role="progressbar" style="width: 0%;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                            <div class="progress-bar graph-bar-rate bg-navy bg-gradient" role="progressbar" style="width: 0%;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                            <div class="progress-bar graph-bar-rate bg-yellow bg-gradient" role="progressbar" style="width: 0%;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                            <div class="progress-bar graph-bar-rate bg-red bg-gradient" role="progressbar" style="width: 0%;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                            <div class="progress-bar graph-bar-rate bg-purple bg-gradient" role="progressbar" style="width: 0%;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                            <div class="progress-bar graph-bar-rate bg-blue" role="progressbar" style="width: 0%;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                            <div class="progress-bar graph-bar-rate bg-silver" role="progressbar" style="width: 0%;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                            <div class="progress-bar graph-bar-rate bg-gold" role="progressbar" style="width: 0%;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                            <div class="progress-bar graph-bar-rate bg-rainbow" role="progressbar" style="width: 0%;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                        </div>
                        <div class="position-absolute top-0 translate-middle current-loc" style="left: 0%!important;">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-caret-down-fill" viewBox="0 0 16 16">
                                <path d="M7.247 11.14 2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z"></path>
                            </svg>
                        </div>
                        <div class="position-absolute top-100 translate-middle current-loc" style="left: 0%!important; top: 75%!important;">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-caret-up-fill" viewBox="0 0 16 16">
                                <path d="m7.247 4.86-4.796 5.481c-.566.647-.106 1.659.753 1.659h9.592a1 1 0 0 0 .753-1.659l-4.796-5.48a1 1 0 0 0-1.506 0z"></path>
                            </svg>
                        </div>
                    </div>
                </div>
            </div>
            <!-- 新曲枠 -->
            <div class="mt-2">
                <div class="navbar sticky-top refresh-target fade" style="opacity: 0.9; background-color: var(--bs-white);">
                    <div class="h3 mb-0">
                        <span class="lang-jpn">新曲枠</span>
                        <span class="lang-eng d-none">Newer Charts</span>
                    </div>
                    <div class="h6 mb-0 text-end">
                        <div class="pb-1">
                            <span class="badge border border-secondary text-dark align-middle me-1">
                                <span class="lang-jpn">小計</span>
                                <span class="lang-eng d-none">Subtotal</span>
                            </span>
                            <span class="summedRateCurrent me-1 align-middle">0.00</span>
                            <span class="badge border border-secondary text-dark align-middle me-1">
                                <span class="lang-jpn">理論値</span>
                                <span class="lang-eng d-none">Max</span>
                            </span>
                            <span class="summedRateUpper align-middle">0.00</span>
                        </div>
                        <div>
                            <span class="badge border border-secondary text-dark align-middle me-1" style="background-color: #cfe2ff;">
                                <span class="lang-jpn">レーティング対象</span>
                                <span class="lang-eng d-none">Rate Baseline</span>
                            </span>
                            <span class="singleRateLower align-middle">0.00</span>
                            <span class="align-middle">
                                <small>
                                    <span class="lang-jpn">以上</span>
                                    <span class="lang-eng d-none"></span>
                                </small>
                            </span>
                        </div>
                    </div>
                </div>
                <div class="stats-graph">
                    <div class="progress shadow-sm mx-4">    
                        <div class="progress-bar graph-bar-stats bg-lt-950" role="progressbar" style="width: 0%;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                        <div class="progress-bar graph-bar-stats bg-is-950" role="progressbar" style="width: 0%;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                        <div class="progress-bar graph-bar-stats bg-is-960" role="progressbar" style="width: 0%;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                        <div class="progress-bar graph-bar-stats bg-is-970" role="progressbar" style="width: 0%;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                        <div class="progress-bar graph-bar-stats bg-is-980" role="progressbar" style="width: 0%;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                        <div class="progress-bar graph-bar-stats bg-ge-990" role="progressbar" style="width: 0%;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                    </div>
                    <div class="progress bg-transparent">
                        <div class="progress-bar bg-transparent" role="progressbar" style="width: 16.666%;" aria-valuenow="16.666" aria-valuemin="0" aria-valuemax="100">
                            <span class="lt-950">&lt;950k</span>
                        </div>
                        <div class="progress-bar bg-transparent" role="progressbar" style="width: 16.666%;" aria-valuenow="16.666" aria-valuemin="0" aria-valuemax="100">
                            <span class="is-950">950k</span>
                        </div>
                        <div class="progress-bar bg-transparent" role="progressbar" style="width: 16.666%;" aria-valuenow="16.666" aria-valuemin="0" aria-valuemax="100">
                            <span class="is-960">960k</span>
                        </div>
                        <div class="progress-bar bg-transparent" role="progressbar" style="width: 16.666%;" aria-valuenow="16.666" aria-valuemin="0" aria-valuemax="100">
                            <span class="is-970">970k</span>
                        </div>
                        <div class="progress-bar bg-transparent" role="progressbar" style="width: 16.666%;" aria-valuenow="16.666" aria-valuemin="0" aria-valuemax="100">
                            <span class="is-980">980k</span>
                        </div>
                        <div class="progress-bar bg-transparent" role="progressbar" style="width: 16.666%;" aria-valuenow="16.666" aria-valuemin="0" aria-valuemax="100">
                            <span class="ge-990">990k</span>
                        </div>
                    </div>
                    <div class="progress bg-transparent">
                        <div class="progress-bar bg-transparent" role="progressbar" style="width: 16.666%;" aria-valuenow="16.666" aria-valuemin="0" aria-valuemax="100">
                            <span class="graph-ratio-stats lt-950">(0.00%)</span>
                        </div>
                        <div class="progress-bar bg-transparent" role="progressbar" style="width: 16.666%;" aria-valuenow="16.666" aria-valuemin="0" aria-valuemax="100">
                            <span class="graph-ratio-stats is-950">(0.00%)</span>
                        </div>
                        <div class="progress-bar bg-transparent" role="progressbar" style="width: 16.666%;" aria-valuenow="16.666" aria-valuemin="0" aria-valuemax="100">
                            <span class="graph-ratio-stats is-960">(0.00%)</span>
                        </div>
                        <div class="progress-bar bg-transparent" role="progressbar" style="width: 16.666%;" aria-valuenow="16.666" aria-valuemin="0" aria-valuemax="100">
                            <span class="graph-ratio-stats is-970">(0.00%)</span>
                        </div>
                        <div class="progress-bar bg-transparent" role="progressbar" style="width: 16.666%;" aria-valuenow="16.666" aria-valuemin="0" aria-valuemax="100">
                            <span class="graph-ratio-stats is-980">(0.00%)</span>
                        </div>
                        <div class="progress-bar bg-transparent" role="progressbar" style="width: 16.666%;" aria-valuenow="16.666" aria-valuemin="0" aria-valuemax="100">
                            <span class="graph-ratio-stats ge-990">(0.00%)</span>
                        </div>
                    </div>
                </div>
                <div class="table-responsive">
                    <table class="table table-sm caption-top">
                        <caption>
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-left-right" viewBox="0 0 16 16">
                                <path fill-rule="evenodd" d="M1 11.5a.5.5 0 0 0 .5.5h11.793l-3.147 3.146a.5.5 0 0 0 .708.708l4-4a.5.5 0 0 0 0-.708l-4-4a.5.5 0 0 0-.708.708L13.293 11H1.5a.5.5 0 0 0-.5.5zm14-7a.5.5 0 0 1-.5.5H2.707l3.147 3.146a.5.5 0 1 1-.708.708l-4-4a.5.5 0 0 1 0-.708l4-4a.5.5 0 1 1 .708.708L2.707 4H14.5a.5.5 0 0 1 .5.5z"/>
                            </svg>
                            <span class="lang-jpn">この表は左右にスクロールできます</span>
                            <span class="lang-eng d-none">This table is scrollable horizontally.</span>
                        </caption>
                        <thead>
                            <tr>
                                <th scope="col" colspan="4">
                                    <small>
                                        <span class="lang-jpn">基本情報</span>
                                        <span class="lang-eng d-none">Play Results</span>
                                    </small>
                                </th>
                                <th scope="col" colspan="4">
                                    <small>
                                        <span class="lang-jpn">譜面別Rate</span>
                                        <span class="lang-eng d-none">Single Rate</span>
                                    </small>
                                </th>
                                <th scope="col" colspan="5">
                                    <small>
                                        <span class="lang-jpn">スコア別上昇値</span>
                                        <span class="lang-eng d-none">Rate Increases</span>
                                    </small>
                                </th>
                            </tr>
                            <tr>
                                <th scope="col">#</th>
                                <th scope="col">
                                    <span class="lang-jpn">曲名</span>
                                    <span class="lang-eng d-none">Song</span>
                                </th>
                                <th scope="col">
                                    <span class="lang-jpn">レベル</span>
                                    <span class="lang-eng d-none">Level</span>
                                </th>
                                <th scope="col">
                                    <span class="lang-jpn">スコア</span>
                                    <span class="lang-eng d-none">Score</span>
                                </th>
                                <th scope="col">
                                    <span class="lang-jpn">定数</span>
                                    <span class="lang-eng d-none">Const</span>
                                </th>
                                <th scope="col">
                                    <span class="lang-jpn">倍数</span>
                                    <span class="lang-eng d-none">Modifier</span>
                                </th>
                                <th scope="col">
                                    <span class="lang-jpn">現在</span>
                                    <span class="lang-eng d-none">Now</span>
                                </th>
                                <th scope="col">
                                    <span class="lang-jpn">上限</span>
                                    <span class="lang-eng d-none">Max</span>
                                </th>
                                <th scope="col">950k</th>
                                <th scope="col">960k</th>
                                <th scope="col">970k</th>
                                <th scope="col">980k</th>
                                <th scope="col">990k</th>
                            </tr>
                        </thead>
                        <tbody class="scoresTable">
                        </tbody>
                    </table>
                </div>
            </div>
            <!-- 旧曲枠 -->
            <div class="mt-2">
                <div class="navbar sticky-top refresh-target fade" style="opacity: 0.9; background-color: var(--bs-white);">
                    <div class="h3 mb-0">
                        <span class="lang-jpn">旧曲枠</span>
                        <span class="lang-eng d-none">Older Charts</span>
                    </div>
                    <div class="h6 mb-0 text-end">
                        <div class="pb-1">
                            <span class="badge border border-secondary text-dark align-middle me-1">
                                <span class="lang-jpn">小計</span>
                                <span class="lang-eng d-none">Subtotal</span>
                            </span>
                            <span class="summedRateCurrent me-1 align-middle">0.00</span>
                            <span class="badge border border-secondary text-dark align-middle me-1">
                                <span class="lang-jpn">理論値</span>
                                <span class="lang-eng d-none">Max</span>
                            </span>
                            <span class="summedRateUpper align-middle">0.00</span>
                        </div>
                        <div>
                            <span class="badge border border-secondary text-dark align-middle me-1" style="background-color: #cfe2ff;">
                                <span class="lang-jpn">レーティング対象</span>
                                <span class="lang-eng d-none">Rate Baseline</span>
                            </span>
                            <span class="singleRateLower align-middle">0.00</span>
                            <span class="align-middle">
                                <small>
                                    <span class="lang-jpn">以上</span>
                                    <span class="lang-eng d-none"></span>
                                </small>
                            </span>
                        </div>
                    </div>
                </div>
                <div class="stats-graph">
                    <div class="progress shadow-sm mx-4">
                        <div class="progress-bar graph-bar-stats bg-lt-950" role="progressbar" style="width: 0%;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                        <div class="progress-bar graph-bar-stats bg-is-950" role="progressbar" style="width: 0%;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                        <div class="progress-bar graph-bar-stats bg-is-960" role="progressbar" style="width: 0%;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                        <div class="progress-bar graph-bar-stats bg-is-970" role="progressbar" style="width: 0%;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                        <div class="progress-bar graph-bar-stats bg-is-980" role="progressbar" style="width: 0%;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                        <div class="progress-bar graph-bar-stats bg-ge-990" role="progressbar" style="width: 0%;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                    </div>
                    <div class="progress bg-transparent">
                        <div class="progress-bar bg-transparent" role="progressbar" style="width: 16.666%;" aria-valuenow="16.666" aria-valuemin="0" aria-valuemax="100">
                            <span class="lt-950">&lt;950k</span>
                        </div>
                        <div class="progress-bar bg-transparent" role="progressbar" style="width: 16.666%;" aria-valuenow="16.666" aria-valuemin="0" aria-valuemax="100">
                            <span class="is-950">950k</span>
                        </div>
                        <div class="progress-bar bg-transparent" role="progressbar" style="width: 16.666%;" aria-valuenow="16.666" aria-valuemin="0" aria-valuemax="100">
                            <span class="is-960">960k</span>
                        </div>
                        <div class="progress-bar bg-transparent" role="progressbar" style="width: 16.666%;" aria-valuenow="16.666" aria-valuemin="0" aria-valuemax="100">
                            <span class="is-970">970k</span>
                        </div>
                        <div class="progress-bar bg-transparent" role="progressbar" style="width: 16.666%;" aria-valuenow="16.666" aria-valuemin="0" aria-valuemax="100">
                            <span class="is-980">980k</span>
                        </div>
                        <div class="progress-bar bg-transparent" role="progressbar" style="width: 16.666%;" aria-valuenow="16.666" aria-valuemin="0" aria-valuemax="100">
                            <span class="ge-990">990k</span>
                        </div>
                    </div>
                    <div class="progress bg-transparent">
                        <div class="progress-bar bg-transparent" role="progressbar" style="width: 16.666%;" aria-valuenow="16.666" aria-valuemin="0" aria-valuemax="100">
                            <span class="graph-ratio-stats lt-950">(0.00%)</span>
                        </div>
                        <div class="progress-bar bg-transparent" role="progressbar" style="width: 16.666%;" aria-valuenow="16.666" aria-valuemin="0" aria-valuemax="100">
                            <span class="graph-ratio-stats is-950">(0.00%)</span>
                        </div>
                        <div class="progress-bar bg-transparent" role="progressbar" style="width: 16.666%;" aria-valuenow="16.666" aria-valuemin="0" aria-valuemax="100">
                            <span class="graph-ratio-stats is-960">(0.00%)</span>
                        </div>
                        <div class="progress-bar bg-transparent" role="progressbar" style="width: 16.666%;" aria-valuenow="16.666" aria-valuemin="0" aria-valuemax="100">
                            <span class="graph-ratio-stats is-970">(0.00%)</span>
                        </div>
                        <div class="progress-bar bg-transparent" role="progressbar" style="width: 16.666%;" aria-valuenow="16.666" aria-valuemin="0" aria-valuemax="100">
                            <span class="graph-ratio-stats is-980">(0.00%)</span>
                        </div>
                        <div class="progress-bar bg-transparent" role="progressbar" style="width: 16.666%;" aria-valuenow="16.666" aria-valuemin="0" aria-valuemax="100">
                            <span class="graph-ratio-stats ge-990">(0.00%)</span>
                        </div>
                    </div>
                </div>
                <div class="table-responsive">
                    <table class="table table-sm caption-top">
                        <caption>
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-left-right" viewBox="0 0 16 16">
                                <path fill-rule="evenodd" d="M1 11.5a.5.5 0 0 0 .5.5h11.793l-3.147 3.146a.5.5 0 0 0 .708.708l4-4a.5.5 0 0 0 0-.708l-4-4a.5.5 0 0 0-.708.708L13.293 11H1.5a.5.5 0 0 0-.5.5zm14-7a.5.5 0 0 1-.5.5H2.707l3.147 3.146a.5.5 0 1 1-.708.708l-4-4a.5.5 0 0 1 0-.708l4-4a.5.5 0 1 1 .708.708L2.707 4H14.5a.5.5 0 0 1 .5.5z"/>
                            </svg>
                            <span class="lang-jpn">この表は左右にスクロールできます</span>
                            <span class="lang-eng d-none">This table is scrollable horizontally.</span>
                        </caption>
                        <thead>
                            <tr>
                                <th scope="col" colspan="4">
                                    <small>
                                        <span class="lang-jpn">基本情報</span>
                                        <span class="lang-eng d-none">Play Results</span>
                                    </small>
                                </th>
                                <th scope="col" colspan="4">
                                    <small>
                                        <span class="lang-jpn">譜面別Rate</span>
                                        <span class="lang-eng d-none">Single Rate</span>
                                    </small>
                                </th>
                                <th scope="col" colspan="5">
                                    <small>
                                        <span class="lang-jpn">スコア別上昇値</span>
                                        <span class="lang-eng d-none">Rate Increases</span>
                                    </small>
                                </th>
                            </tr>
                            <tr>
                                <th scope="col">#</th>
                                <th scope="col">
                                    <span class="lang-jpn">曲名</span>
                                    <span class="lang-eng d-none">Song</span>
                                </th>
                                <th scope="col">
                                    <span class="lang-jpn">レベル</span>
                                    <span class="lang-eng d-none">Level</span>
                                </th>
                                <th scope="col">
                                    <span class="lang-jpn">スコア</span>
                                    <span class="lang-eng d-none">Score</span>
                                </th>
                                <th scope="col">
                                    <span class="lang-jpn">定数</span>
                                    <span class="lang-eng d-none">Const</span>
                                </th>
                                <th scope="col">
                                    <span class="lang-jpn">倍数</span>
                                    <span class="lang-eng d-none">Modifier</span>
                                </th>
                                <th scope="col">
                                    <span class="lang-jpn">現在</span>
                                    <span class="lang-eng d-none">Now</span>
                                </th>
                                <th scope="col">
                                    <span class="lang-jpn">上限</span>
                                    <span class="lang-eng d-none">Max</span>
                                </th>
                                <th scope="col">950k</th>
                                <th scope="col">960k</th>
                                <th scope="col">970k</th>
                                <th scope="col">980k</th>
                                <th scope="col">990k</th>
                            </tr>
                        </thead>
                        <tbody class="scoresTable">
                        </tbody>
                    </table>
                </div>
            </div>
            <!-- ヘルプモーダル -->
            <div class="modal fade" id="helpModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="helpModalLabel" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <div class="modal-title h5" id="helpModalLabel">
                                <span class="lang-jpn">ヘルプ</span>
                                <span class="lang-eng d-none">Help</span>
                            </div>
                            <div class="btn-group ms-2" role="group">
                                <button type="button" class="btn btn-outline-primary" id="btn-japanese" onclick="switchToJapanese()">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-globe" viewBox="0 0 16 16">
                                        <path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm7.5-6.923c-.67.204-1.335.82-1.887 1.855A7.97 7.97 0 0 0 5.145 4H7.5V1.077zM4.09 4a9.267 9.267 0 0 1 .64-1.539 6.7 6.7 0 0 1 .597-.933A7.025 7.025 0 0 0 2.255 4H4.09zm-.582 3.5c.03-.877.138-1.718.312-2.5H1.674a6.958 6.958 0 0 0-.656 2.5h2.49zM4.847 5a12.5 12.5 0 0 0-.338 2.5H7.5V5H4.847zM8.5 5v2.5h2.99a12.495 12.495 0 0 0-.337-2.5H8.5zM4.51 8.5a12.5 12.5 0 0 0 .337 2.5H7.5V8.5H4.51zm3.99 0V11h2.653c.187-.765.306-1.608.338-2.5H8.5zM5.145 12c.138.386.295.744.468 1.068.552 1.035 1.218 1.65 1.887 1.855V12H5.145zm.182 2.472a6.696 6.696 0 0 1-.597-.933A9.268 9.268 0 0 1 4.09 12H2.255a7.024 7.024 0 0 0 3.072 2.472zM3.82 11a13.652 13.652 0 0 1-.312-2.5h-2.49c.062.89.291 1.733.656 2.5H3.82zm6.853 3.472A7.024 7.024 0 0 0 13.745 12H11.91a9.27 9.27 0 0 1-.64 1.539 6.688 6.688 0 0 1-.597.933zM8.5 12v2.923c.67-.204 1.335-.82 1.887-1.855.173-.324.33-.682.468-1.068H8.5zm3.68-1h2.146c.365-.767.594-1.61.656-2.5h-2.49a13.65 13.65 0 0 1-.312 2.5zm2.802-3.5a6.959 6.959 0 0 0-.656-2.5H12.18c.174.782.282 1.623.312 2.5h2.49zM11.27 2.461c.247.464.462.98.64 1.539h1.835a7.024 7.024 0 0 0-3.072-2.472c.218.284.418.598.597.933zM10.855 4a7.966 7.966 0 0 0-.468-1.068C9.835 1.897 9.17 1.282 8.5 1.077V4h2.355z"/>
                                    </svg>
                                    Japanese
                                </button>
                                <button type="button" class="btn btn-outline-primary" id="btn-english" onclick="switchToEnglish()">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-globe" viewBox="0 0 16 16">
                                        <path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm7.5-6.923c-.67.204-1.335.82-1.887 1.855A7.97 7.97 0 0 0 5.145 4H7.5V1.077zM4.09 4a9.267 9.267 0 0 1 .64-1.539 6.7 6.7 0 0 1 .597-.933A7.025 7.025 0 0 0 2.255 4H4.09zm-.582 3.5c.03-.877.138-1.718.312-2.5H1.674a6.958 6.958 0 0 0-.656 2.5h2.49zM4.847 5a12.5 12.5 0 0 0-.338 2.5H7.5V5H4.847zM8.5 5v2.5h2.99a12.495 12.495 0 0 0-.337-2.5H8.5zM4.51 8.5a12.5 12.5 0 0 0 .337 2.5H7.5V8.5H4.51zm3.99 0V11h2.653c.187-.765.306-1.608.338-2.5H8.5zM5.145 12c.138.386.295.744.468 1.068.552 1.035 1.218 1.65 1.887 1.855V12H5.145zm.182 2.472a6.696 6.696 0 0 1-.597-.933A9.268 9.268 0 0 1 4.09 12H2.255a7.024 7.024 0 0 0 3.072 2.472zM3.82 11a13.652 13.652 0 0 1-.312-2.5h-2.49c.062.89.291 1.733.656 2.5H3.82zm6.853 3.472A7.024 7.024 0 0 0 13.745 12H11.91a9.27 9.27 0 0 1-.64 1.539 6.688 6.688 0 0 1-.597.933zM8.5 12v2.923c.67-.204 1.335-.82 1.887-1.855.173-.324.33-.682.468-1.068H8.5zm3.68-1h2.146c.365-.767.594-1.61.656-2.5h-2.49a13.65 13.65 0 0 1-.312 2.5zm2.802-3.5a6.959 6.959 0 0 0-.656-2.5H12.18c.174.782.282 1.623.312 2.5h2.49zM11.27 2.461c.247.464.462.98.64 1.539h1.835a7.024 7.024 0 0 0-3.072-2.472c.218.284.418.598.597.933zM10.855 4a7.966 7.966 0 0 0-.468-1.068C9.835 1.897 9.17 1.282 8.5 1.077V4h2.355z"/>
                                    </svg>
                                    English
                                </button>
                            </div>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <div class="h5">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-house" viewBox="0 0 16 16">
                                    <path fill-rule="evenodd" d="M2 13.5V7h1v6.5a.5.5 0 0 0 .5.5h9a.5.5 0 0 0 .5-.5V7h1v6.5a1.5 1.5 0 0 1-1.5 1.5h-9A1.5 1.5 0 0 1 2 13.5zm11-11V6l-2-2V2.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5z"/>
                                    <path fill-rule="evenodd" d="M7.293 1.5a1 1 0 0 1 1.414 0l6.647 6.646a.5.5 0 0 1-.708.708L8 2.207 1.354 8.854a.5.5 0 1 1-.708-.708L7.293 1.5z"/>
                                </svg>
                                <span class="lang-jpn">ようこそ</span>
                                <span class="lang-eng d-none">Welcome</span>
                            </div>
                            <div>
                                <span class="lang-jpn"><strong>WACCA RATING ANALYZER</strong> は、WACCAのマイページで確認できる情報を元に、レーティングを上昇させる上で便利なデータを確認できるツールです。</span>
                                <span class="lang-eng d-none">The <strong>WACCA RATING ANALYZER</strong> provides you useful data for increasing your rating based on the data available on your WACCA My Page.</span>
                            </div>
                            <hr>
                            <div class="h5">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-lightning" viewBox="0 0 16 16">
                                    <path d="M5.52.359A.5.5 0 0 1 6 0h4a.5.5 0 0 1 .474.658L8.694 6H12.5a.5.5 0 0 1 .395.807l-7 9a.5.5 0 0 1-.873-.454L6.823 9.5H3.5a.5.5 0 0 1-.48-.641l2.5-8.5zM6.374 1 4.168 8.5H7.5a.5.5 0 0 1 .478.647L6.78 13.04 11.478 7H8a.5.5 0 0 1-.474-.658L9.306 1H6.374z"/>
                                </svg>
                                <span class="lang-jpn">特徴</span>
                                <span class="lang-eng d-none">Features</span>
                                <button type="button" class="btn btn-outline-primary ms-2" id="btn-example" onclick="openAnExample()">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-up-right-square" viewBox="0 0 16 16">
                                        <path fill-rule="evenodd" d="M15 2a1 1 0 0 0-1-1H2a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V2zM0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2zm5.854 8.803a.5.5 0 1 1-.708-.707L9.243 6H6.475a.5.5 0 1 1 0-1h3.975a.5.5 0 0 1 .5.5v3.975a.5.5 0 1 1-1 0V6.707l-4.096 4.096z"/>
                                    </svg>
                                    <span class="lang-jpn">実行例を開く</span>
                                    <span class="lang-eng d-none">Open an Example</span>
                                </button>
                            </div>
                            <div>
                                <ul class="list-group">
                                    <li class="list-group-item">
                                        <div class="fw-bold">
                                            <span class="lang-jpn">データ収集なし</span>
                                            <span class="lang-eng d-none">No data collection</span>
                                        </div>
                                        <div>
                                            <span class="lang-jpn">このツールはブラウザー上で動作し、あなたのプレイ成績がサーバーへ送信されることはありません。</span>
                                            <span class="lang-eng d-none">This program runs in your browser and does not send your play results to the server.</span>
                                        </div>
                                    </li>
                                    <li class="list-group-item">
                                        <div class="fw-bold">
                                            <span class="lang-jpn">レーティング候補譜面の上限数なし</span>
                                            <span class="lang-eng d-none">Show more 'Rating Candidate Charts'</span>
                                        </div>
                                        <div>
                                            <span class="lang-jpn">レーティング候補譜面をはじめ、レーティングを上げるために便利なデータを難易度EXPERT以上のすべての譜面で見ることができます。</span>
                                            <span class="lang-eng d-none">You can see 'Rating Candidate Charts' and other useful data for increasing your rating on all charts of difficulty EXPERT and higher.</span>
                                        </div>
                                    </li>
                                    <li class="list-group-item">
                                        <div class="fw-bold">
                                            <span class="lang-jpn">レーティング上昇量が詳細に分かる</span>
                                            <span class="lang-eng d-none">Detailed rating increase</span>
                                        </div>
                                        <div>
                                            <span class="lang-jpn">所定のスコアへ到達した際のレーティングの上昇量が、譜面ごとに分かります。</span>
                                            <span class="lang-eng d-none">You can see the amount of increase in your rating when you reach a certain score for each chart.</span>
                                        </div>
                                    </li>
                                </ul>
                            </div>
                            <hr>
                            <div class="h5">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-exclamation-diamond" viewBox="0 0 16 16">
                                    <path d="M6.95.435c.58-.58 1.52-.58 2.1 0l6.515 6.516c.58.58.58 1.519 0 2.098L9.05 15.565c-.58.58-1.519.58-2.098 0L.435 9.05a1.482 1.482 0 0 1 0-2.098L6.95.435zm1.4.7a.495.495 0 0 0-.7 0L1.134 7.65a.495.495 0 0 0 0 .7l6.516 6.516a.495.495 0 0 0 .7 0l6.516-6.516a.495.495 0 0 0 0-.7L8.35 1.134z"/>
                                    <path d="M7.002 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 4.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 4.995z"/>
                                </svg>
                                <span class="lang-jpn">注意</span>
                                <span class="lang-eng d-none">Caution</span>
                            </div>
                            <div>
                                <ul class="list-group">
                                    <li class="list-group-item">
                                        <div>
                                            <span class="lang-jpn">ブラウザーのタブを閉じると、<strong>分析されたデータは失われます</strong>。なお再度ツールを実行することで、同じ結果を得られます。</span>
                                            <span class="lang-eng d-none">When you close the tab in your browser, <strong>the analyzed data will be lost</strong>. But don't worry. Just run the program again and you will get the same result.</span>
                                        </div>
                                    </li>
                                    <li class="list-group-item">
                                        <div>
                                            <span class="lang-jpn">譜面定数はあくまで推測された値であるため、<strong>公式の値とは異なる可能性</strong>があります。</span>
                                            <span class="lang-eng d-none">The chart constants are only guessed values and <strong>may be different from the official values</strong>.</span>
                                        </div>
                                    </li>
                                    <li class="list-group-item">
                                        <div>
                                            <span class="lang-jpn">このプログラムは暇つぶしを目的に作成されているため、<strong>品質は保証されておりません</strong>。<span class="text-muted">役に立たなかったらごめんなさい。</span></span>
                                            <span class="lang-eng d-none">The quality of this program is <strong>not guaranteed</strong>, as it was created as a way to pass the time. <span class="text-muted">I'm sorry if this program did not help you...</span></span>
                                        </div>
                                    </li>
                                </ul>
                            </div>
                            <hr>
                            <div class="h5">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-gear" viewBox="0 0 16 16">
                                    <path d="M8 4.754a3.246 3.246 0 1 0 0 6.492 3.246 3.246 0 0 0 0-6.492zM5.754 8a2.246 2.246 0 1 1 4.492 0 2.246 2.246 0 0 1-4.492 0z"/>
                                    <path d="M9.796 1.343c-.527-1.79-3.065-1.79-3.592 0l-.094.319a.873.873 0 0 1-1.255.52l-.292-.16c-1.64-.892-3.433.902-2.54 2.541l.159.292a.873.873 0 0 1-.52 1.255l-.319.094c-1.79.527-1.79 3.065 0 3.592l.319.094a.873.873 0 0 1 .52 1.255l-.16.292c-.892 1.64.901 3.434 2.541 2.54l.292-.159a.873.873 0 0 1 1.255.52l.094.319c.527 1.79 3.065 1.79 3.592 0l.094-.319a.873.873 0 0 1 1.255-.52l.292.16c1.64.893 3.434-.902 2.54-2.541l-.159-.292a.873.873 0 0 1 .52-1.255l.319-.094c1.79-.527 1.79-3.065 0-3.592l-.319-.094a.873.873 0 0 1-.52-1.255l.16-.292c.893-1.64-.902-3.433-2.541-2.54l-.292.159a.873.873 0 0 1-1.255-.52l-.094-.319zm-2.633.283c.246-.835 1.428-.835 1.674 0l.094.319a1.873 1.873 0 0 0 2.693 1.115l.291-.16c.764-.415 1.6.42 1.184 1.185l-.159.292a1.873 1.873 0 0 0 1.116 2.692l.318.094c.835.246.835 1.428 0 1.674l-.319.094a1.873 1.873 0 0 0-1.115 2.693l.16.291c.415.764-.42 1.6-1.185 1.184l-.291-.159a1.873 1.873 0 0 0-2.693 1.116l-.094.318c-.246.835-1.428.835-1.674 0l-.094-.319a1.873 1.873 0 0 0-2.692-1.115l-.292.16c-.764.415-1.6-.42-1.184-1.185l.159-.291A1.873 1.873 0 0 0 1.945 8.93l-.319-.094c-.835-.246-.835-1.428 0-1.674l.319-.094A1.873 1.873 0 0 0 3.06 4.377l-.16-.292c-.415-.764.42-1.6 1.185-1.184l.292.159a1.873 1.873 0 0 0 2.692-1.115l.094-.319z"/>
                                </svg>
                                <span class="lang-jpn">準備</span>
                                <span class="lang-eng d-none">Getting Started</span>
                            </div>
                            <div>
                                <ol class="list-group list-group-numbered">
                                    <li class="list-group-item">
                                        <span class="lang-jpn">このページをブックマークする</span>
                                        <span class="lang-eng d-none">Bookmark this page.</span>
                                        <div class="text-muted">
                                            <span class="lang-jpn">ブックマークの名前の変更は任意です。</span>
                                            <span class="lang-eng d-none">*Renaming your bookmarks is optional.</span>
                                        </div>
                                        <div class="accordion border border-danger rounded m-2" id="accordion-android-user">
                                            <div class="accordion-item">
                                                <div class="h2 accordion-header" id="accordion-android-user-1">
                                                    <button class="accordion-button accordion-button-custom-danger collapsed text-danger p-2" type="button" data-bs-toggle="collapse" data-bs-target="#collapse-android-user-1" aria-expanded="false" aria-controls="collapse-android-user-1">
                                                        <span class="me-1">
                                                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-exclamation-circle" viewBox="0 0 16 16">
                                                                <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
                                                                <path d="M7.002 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 4.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 4.995z"/>
                                                            </svg>
                                                        </span>
                                                        <span class="lang-jpn">Android端末をご利用の方へ</span>
                                                        <span class="lang-eng d-none">For Android device users</span>
                                                    </button>
                                                </div>
                                                <div id="collapse-android-user-1" class="accordion-collapse collapse" aria-labelledby="accordion-android-user-1" data-bs-parent="#accordion-android-user">
                                                    <div class="accordion-body p-2">
                                                        <span class="lang-jpn">環境によっては、当ツールは動作しない場合があります。まずお使いのブラウザーで動作確認を行い、動作しない場合は<strong>Firefox</strong>に切り替えてみてください。Chromeでは動作しなかったという報告があります。</span>
                                                        <span class="lang-eng d-none">This program may not work on some devices. So please try to see if this program works in your current browser, and if not, switch to <strong>Firefox</strong>. We have received reports that this program did not work on Chrome.</span>
                                                    </div>
                                                    <hr class="m-0">
                                                    <div class="accordion-body p-2">
                                                        <span class="lang-jpn">ブックマークの名前の変更は任意ですが、Android端末をご利用の場合は、当プログラムを実行する際にブックマークの名前を入力する必要がありますので、<strong>入力が容易な名前に変更</strong>してください。</span>
                                                        <span class="lang-eng d-none">Renaming your bookmarks is optional, but if your device is an Android device, you will need to enter the name of the bookmark when you run this program, we recommends that you <strong>change the name to one that is easy to enter</strong>.</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </li>
                                    <li class="list-group-item">
                                        <span class="lang-jpn">ブックマークレットをコピーする</span>
                                        <span class="lang-eng d-none">Copy the bookmarklet.</span>
                                        <div class="input-group m-2">
                                            <input type="text" class="form-control" id="copyTarget" placeholder="code" aria-label="code" aria-describedby="button-addon" value="javascript:(function(){let%20path='https://shimmand.github.io/waccaSupportTools/analyzePlayData/main.js';import(path).then((obj)=>obj.main())})();" readonly="">
                                            <button class="btn btn-outline-primary" onclick="copyBookmarklet()" type="button" id="button-addon">
                                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16">
                                                    <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/>
                                                    <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/>
                                                </svg>
                                                <span class="lang-jpn">コピー</span>
                                                <span class="lang-eng d-none">Copy</span>
                                            </button>
                                        </div>
                                        <div class="accordion border border-primary rounded m-2" id="accordion-what-is-bookmarklet">
                                            <div class="accordion-item">
                                                <div class="h2 accordion-header" id="accordion-what-is-bookmarklet-1">
                                                    <button class="accordion-button collapsed text-primary p-2" type="button" data-bs-toggle="collapse" data-bs-target="#collapse-what-is-bookmarklet-1" aria-expanded="false" aria-controls="collapse-what-is-bookmarklet-1">
                                                        <span class="me-1">
                                                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-question-circle" viewBox="0 0 16 16">
                                                                <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
                                                                <path d="M5.255 5.786a.237.237 0 0 0 .241.247h.825c.138 0 .248-.113.266-.25.09-.656.54-1.134 1.342-1.134.686 0 1.314.343 1.314 1.168 0 .635-.374.927-.965 1.371-.673.489-1.206 1.06-1.168 1.987l.003.217a.25.25 0 0 0 .25.246h.811a.25.25 0 0 0 .25-.25v-.105c0-.718.273-.927 1.01-1.486.609-.463 1.244-.977 1.244-2.056 0-1.511-1.276-2.241-2.673-2.241-1.267 0-2.655.59-2.75 2.286zm1.557 5.763c0 .533.425.927 1.01.927.609 0 1.028-.394 1.028-.927 0-.552-.42-.94-1.029-.94-.584 0-1.009.388-1.009.94z"/>
                                                            </svg>
                                                        </span>
                                                        <span class="lang-jpn">ブックマークレットとは？</span>
                                                        <span class="lang-eng d-none">What is bookmarklet?</span>
                                                    </button>
                                                </div>
                                                <div id="collapse-what-is-bookmarklet-1" class="accordion-collapse collapse" aria-labelledby="accordion-what-is-bookmarklet-1" data-bs-parent="#accordion-what-is-bookmarklet">
                                                    <div class="accordion-body p-2">
                                                        <span class="lang-jpn">ブックマークレットとは、任意のタイミングでブックマークを開くことで実行できるJavaScriptで書かれたスクリプトのことです。ここで保存したブックマークレットをマイページで実行すると、ブラウザーがあなたのプレイ成績を収集します。</span>
                                                        <span class="lang-eng d-none">A bookmarklet is a JavaScript script that you can run by opening your bookmarks. If you run the bookmarklet you saved here on My Page, the browser will collect your play scores.</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </li>
                                    <li class="list-group-item">
                                        <span class="lang-jpn">ステップ1で作成したブックマークのアドレスを、ステップ2でコピーした文字列に書き換えて保存する</span>
                                        <span class="lang-eng d-none">Rewrite the address of the bookmark created in step 1 to the string copied in step 2 and save it.</span>
                                    </li>
                                </ol>
                            </div>
                            <hr>
                            <div class="h5">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-play-circle" viewBox="0 0 16 16">
                                    <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
                                    <path d="M6.271 5.055a.5.5 0 0 1 .52.038l3.5 2.5a.5.5 0 0 1 0 .814l-3.5 2.5A.5.5 0 0 1 6 10.5v-5a.5.5 0 0 1 .271-.445z"/>
                                </svg>
                                <span class="lang-jpn">使い方</span>
                                <span class="lang-eng d-none">How to Use</span>
                            </div>
                            <div>
                                <ol class="list-group list-group-numbered">
                                    <li class="list-group-item">
                                        <span class="lang-jpn">WACCAのマイページへログインする</span>
                                        <span class="lang-eng d-none">Login to WACCA My Page.</span>
                                        <div class="m-2">
                                            <button type="button" class="btn btn-outline-primary" id="help" onclick="openMyPage()">
                                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-up-right-square" viewBox="0 0 16 16">
                                                    <path fill-rule="evenodd" d="M15 2a1 1 0 0 0-1-1H2a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V2zM0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2zm5.854 8.803a.5.5 0 1 1-.708-.707L9.243 6H6.475a.5.5 0 1 1 0-1h3.975a.5.5 0 0 1 .5.5v3.975a.5.5 0 1 1-1 0V6.707l-4.096 4.096z"/>
                                                </svg>
                                                <span class="lang-jpn">マイページを開く</span>
                                                <span class="lang-eng d-none">Open My Page</span>
                                            </button>
                                        </div>
                                    </li>
                                    <li class="list-group-item">
                                        <span class="lang-jpn">
                                            <span class="badge border border-secondary text-secondary align-bottom">プレイデータ</span> を押す
                                        </span>
                                        <span class="lang-eng d-none">
                                            Press <span class="badge border border-secondary text-secondary align-bottom">プレイデータ (Play Data)</span>
                                        </span>
                                        <div class="text-muted">
                                            <span class="lang-jpn"></span>
                                            <span class="lang-eng d-none">*Of the six buttons at the top, press the top left button.</span>
                                        </div>
                                    </li>
                                    <li class="list-group-item">
                                        <span class="lang-jpn">ブックマークレットを実行する</span>
                                        <span class="lang-eng d-none">Run the bookmarklet.</span>
                                        <div class="accordion border border-primary rounded m-2" id="accordion-how-to-run">
                                            <div class="accordion-item">
                                                <div class="h2 accordion-header" id="accordion-how-to-run-1">
                                                    <button class="accordion-button collapsed text-primary p-2" type="button" data-bs-toggle="collapse" data-bs-target="#collapse-how-to-run-1" aria-expanded="false" aria-controls="collapse-how-to-run-1">
                                                        <span class="me-1">
                                                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-code-square" viewBox="0 0 16 16">
                                                                <path d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"/>
                                                                <path d="M6.854 4.646a.5.5 0 0 1 0 .708L4.207 8l2.647 2.646a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 0 1 .708 0zm2.292 0a.5.5 0 0 0 0 .708L11.793 8l-2.647 2.646a.5.5 0 0 0 .708.708l3-3a.5.5 0 0 0 0-.708l-3-3a.5.5 0 0 0-.708 0z"/>
                                                            </svg>
                                                        </span>
                                                        <span class="lang-jpn">iPhoneやiPad、標準的なパソコンをご利用の方へ</span>
                                                        <span class="lang-eng d-none">For iPhone, iPad, and most PCs users</span>
                                                    </button>
                                                </div>
                                                <div id="collapse-how-to-run-1" class="accordion-collapse collapse" aria-labelledby="accordion-how-to-run-1" data-bs-parent="#accordion-how-to-run">
                                                    <div class="accordion-body p-2">
                                                        <span class="lang-jpn">ブックマークの一覧からブックマークレットを押してください。</span>
                                                        <span class="lang-eng d-none">Open the list of bookmarks and press the bookmarklet.</span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="accordion-item">
                                                <div class="h2 accordion-header" id="accordion-how-to-run-2">
                                                    <button class="accordion-button collapsed text-primary p-2" type="button" data-bs-toggle="collapse" data-bs-target="#collapse-how-to-run-2" aria-expanded="false" aria-controls="collapse-how-to-run-2">
                                                        <span class="me-1">
                                                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-code-square" viewBox="0 0 16 16">
                                                                <path d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"/>
                                                                <path d="M6.854 4.646a.5.5 0 0 1 0 .708L4.207 8l2.647 2.646a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 0 1 .708 0zm2.292 0a.5.5 0 0 0 0 .708L11.793 8l-2.647 2.646a.5.5 0 0 0 .708.708l3-3a.5.5 0 0 0 0-.708l-3-3a.5.5 0 0 0-.708 0z"/>
                                                            </svg>
                                                        </span>
                                                        <span class="lang-jpn">Android端末およびモバイルOSを搭載した一部のパソコンをご利用の方へ</span>
                                                        <span class="lang-eng d-none">For Android device (and PCs with mobile OS) users</span>
                                                    </button>
                                                </div>
                                                <div id="collapse-how-to-run-2" class="accordion-collapse collapse" aria-labelledby="accordion-how-to-run-2" data-bs-parent="#accordion-how-to-run">
                                                    <div class="accordion-body p-2">
                                                        <span class="lang-jpn">アドレスバーにブックマークレットの名前を入力し、表示された候補の中からブックマークレットを押してください。</span>
                                                        <span class="lang-eng d-none">Type the name of the bookmarklet in the address bar and press the bookmarklet from the list of suggestions.</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="text-muted">
                                            <span class="lang-jpn">ブックマークレットを実行する手順は、端末の環境により異なる場合があります。</span>
                                            <span class="lang-eng d-none">*The steps for executing the bookmarklet may vary depending on the device environment.</span>
                                        </div>
                                    </li>
                                    <li class="list-group-item">
                                        <span class="lang-jpn">
                                            ブックマークレットの処理が完了した旨がページ上に表示されたら、 <span class="badge border border-secondary text-secondary align-bottom">ツールを開く</span> を押す
                                        </span>
                                        <span class="lang-eng d-none">
                                            When you see the message on the page that the bookmarklet has been processed, press <span class="badge border border-secondary text-secondary align-bottom">Open the Web Program</span>.
                                        </span>
                                    </li>
                                    <li class="list-group-item">
                                        <span class="lang-jpn">
                                            <span class="badge border border-secondary text-secondary align-bottom">データを読込</span> を押す
                                        </span>
                                        <span class="lang-eng d-none">
                                            Press <span class="badge border border-secondary text-secondary align-bottom">Load Your Data</span>.
                                        </span>
                                    </li>
                                    <li class="list-group-item">
                                        <span class="lang-jpn">
                                            <span class="badge border border-secondary text-secondary align-bottom">分析を実行</span> を押す
                                        </span>
                                        <span class="lang-eng d-none">
                                            Press <span class="badge border border-secondary text-secondary align-bottom">Start Analysis</span> .
                                        </span>
                                    </li>
                                    <li class="list-group-item text-custom-primary-dark bg-primary bg-opacity-25">
                                        <span class="lang-jpn">完了！</span>
                                        <span class="lang-eng d-none">Complete!</span>
                                    </li>
                                </ol>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Close</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>
