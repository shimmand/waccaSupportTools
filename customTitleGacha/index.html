<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <title>WACCA カスタム称号ガチャ</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
    <script>
        function copyToClipboard() {
            var copyTarget = document.getElementById("copyTarget");
            copyTarget.select();
            document.execCommand("Copy");
            alert("コピーしました");
        }
    </script>
</head>
<body>
    <div class="container-fluid m-2">
        <h2>WACCA カスタム称号ガチャ</h2>
        <h5 class="p-2">準備</h5>
        <p>1. 以下のボタンをクリックし、ブックマークレットのコードをコピーします。</p>
        <p>2. このページをブックマークします。（名前の変更は任意）</p>
        <p>3. ブックマークのアドレスを、[1] でコピーしたものに変更します。</p>
        <h5 class="p-2">使い方</h5>
        <p>WACCAのマイページでカスタム称号の編集ページを開き、ブックマークレットを実行します。</p>
        <p>ブックマークレットの実行方法は以下の通りです。</p>
        <p>iPhoneまたはPCの場合: ブックマーク一覧を表示し、[準備] で作成したブックマークをタップします。</p>
        <p>Android系OSの場合: アドレスバーに [準備] で作成したブックマークの名前を入力し、表示された候補から「javascript〜」というものを選びタップします。名前の入力中にも候補が表示されるため、名前を完全に入力する必要はありません。</p>
        <div class="form-group row m-2">
            <input class="border border-primary rounded text-secondary form-control-plaintext col-10" id="copyTarget" type="text" value="javascript:(function()%7B%20%20%20%20%20const%20excludeStr%20=%20%5B'WACCA%20S%20',%20'WACCA%20Lily%20'%5D;%20%20%20%20%20let%20gachaVol%20=%20Number(prompt('%E4%BD%95%E9%80%A3%E3%81%97%E3%81%BE%E3%81%99%E3%81%8B%EF%BC%9F',%20'10'));%20%20%20%20%20let%20insertCode%20=%20'%3Cp%3E%E3%80%80%3C/p%3E%3Cdiv%20class=%22collection__current-title%20collection-box%22%3E%3Cdl%3E%3Cdt%3E%E3%82%AC%E3%83%81%E3%83%A3%E7%B5%90%E6%9E%9C%3C/dt%3E%3Cdd%3E%3Cp%20class=%22gachaInfo%22%3E%E4%B8%8B%E8%A8%98%E3%81%AE%E7%B5%90%E6%9E%9C%E3%82%92%E3%82%BF%E3%83%83%E3%83%97%E3%81%99%E3%82%8B%E3%81%A8%E3%80%81%E7%A7%B0%E5%8F%B7%E3%82%92%E9%81%A9%E7%94%A8%E3%81%A7%E3%81%8D%E3%81%BE%E3%81%99%E3%80%82%3C/p%3E%3C/dd%3E';%20%20%20%20%20const%20targets%20=%20%5B'select%23partId1','select%23partId2','select%23partId3'%5D;%20%20%20%20%20for(%20let%20i%20=%200;%20i%20%3C%20gachaVol;%20i++%20)%7B%20%20%20%20%20%20%20%20%20let%20customTitle%20=%20'';%20%20%20%20%20%20%20%20%20let%20onclickCode%20=%20'javascript:(function()%7B';%20%20%20%20%20%20%20%20%20for%20(%20let%20j%20=%200;%20j%20%3C%20targets.length;%20j++%20)%7B%20%20%20%20%20%20%20%20%20%20%20%20%20let%20element%20=%20document.querySelector(targets%5Bj%5D);%20%20%20%20%20%20%20%20%20%20%20%20%20let%20selectVol%20=%20element.length;%20%20%20%20%20%20%20%20%20%20%20%20%20let%20isRetry;%20%20%20%20%20%20%20%20%20%20%20%20%20let%20randIndex;%20%20%20%20%20%20%20%20%20%20%20%20%20do%20%7B%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20isRetry%20=%20false;%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20randIndex%20=%20Math.floor(%20Math.random()%20*%20(%20selectVol%20-%201%20)%20+%201%20);%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20for%20(%20let%20k%20=%200;%20k%20%3C%20excludeStr.length;%20k++%20)%7B%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(%20element%5BrandIndex%5D.innerText.indexOf(excludeStr%5Bk%5D)%20!=%20-1%20)%20isRetry%20=%20true%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20while%20(%20isRetry%20);%20%20%20%20%20%20%20%20%20%20%20%20%20customTitle%20+=%20element%5BrandIndex%5D.innerText;%20%20%20%20%20%20%20%20%20%20%20%20%20onclickCode%20+=%20%22document.querySelector('%22%20+%20targets%5Bj%5D%20+%20%22')%5B%22%20+%20randIndex%20+%20%22%5D.selected%20=%20true;%22%20%20%20%20%20%20%20%20%20%7D;%20%20%20%20%20%20%20%20%20onclickCode%20+=%20'%7D)();';%20%20%20%20%20%20%20%20%20if%20(%20customTitle.indexOf('(%E5%8D%8A%E8%A7%92%E3%82%B9%E3%83%9A%E3%83%BC%E3%82%B9)')%20!=%20-1%20)%7B%20%20%20%20%20%20%20%20%20%20%20%20%20customTitle%20=%20customTitle.replace('(%E5%8D%8A%E8%A7%92%E3%82%B9%E3%83%9A%E3%83%BC%E3%82%B9)',%20'')%20%20%20%20%20%20%20%20%20%7D;%20%20%20%20%20%20%20%20%20insertCode%20+=%20'%3Cdd%3E%3Ca%20class=%22gacha%22%20onclick=%22'%20+%20onclickCode%20+%20'%22%3E'%20+%20customTitle%20+%20'%3C/a%3E%3C/dd%3E'%20%20%20%20%20%7D;%20%20%20%20%20insertCode%20+=%20%60%3C/dl%3E%3C/div%3E%3Cp%3E%E3%80%80%3C/p%3E%60;%20%20%20%20%20document.querySelector('div.collection__current-title').insertAdjacentHTML('afterend',%20insertCode);%20%20%20%20%20document.querySelector('p.gachaInfo').style.fontSize%20=%20'12px';%20%20%20%20%20document.querySelector('p.gachaInfo').style.fontWeight%20=%20'normal';%20%20%20%20%20for(%20let%20i%20=%200;%20i%20%3C%20gachaVol;%20i++)%7B%20%20%20%20%20%20%20%20%20document.querySelectorAll('a.gacha')%5Bi%5D.style.color%20=%20'%23000'%20%20%20%20%20%7D%20%7D)();" readonly>
            <button type="button" class="btn btn-primary col" onclick="copyToClipboard()" data-toggle="tooltip" data-placement="top" title="コピーする">
                ブックマークレットをコピー
            </button>
        </div>
    </div>
</body>
</html>
